{"remainingRequest":"D:\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\知识库系统\\admin\\src\\views\\km\\filemanagement\\DraftsList.vue?vue&type=template&id=0c63f54d&scoped=true","dependencies":[{"path":"D:\\知识库系统\\admin\\src\\views\\km\\filemanagement\\DraftsList.vue","mtime":1740915562543},{"path":"D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<a-card :bordered=\"false\">\n  <!-- 查询区域 -->\n  <div class=\"table-page-search-wrapper\">\n    <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\n      <a-row :gutter=\"24\">\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n          <a-form-item label=\"标题\">\n            <a-input placeholder=\"请输入标题\" v-model=\"queryParam.title\"></a-input>\n          </a-form-item>\n        </a-col>\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n          <a-form-item label=\"分类\">\n            <j-dict-select-tag type=\"list\" placeholder=\"请选择分类\" v-model=\"queryParam.category\"\n                               dictCode=\"km_dict_category\"></j-dict-select-tag>\n          </a-form-item>\n        </a-col>\n        <template v-if=\"toggleSearchStatus\">\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"编号\">\n              <a-input placeholder=\"请输入编号\" v-model=\"queryParam.serialNumber\"></a-input>\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"来源\">\n              <j-multi-select-tag type=\"list_multi\" placeholder=\"请选择来源\" v-model=\"queryParam.sourceList\"\n                                  dictCode=\"km_dict_source\"></j-multi-select-tag>\n\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-model-item label=\"版本状态\">\n              <j-multi-select-tag type=\"list_multi\" v-model=\"queryParam.versionList\" :trigger-change=\"true\"\n                                  placeholder=\"请选择版本状态\" dictCode=\"km_dict_versions\"></j-multi-select-tag>\n            </a-form-model-item>\n          </a-col>\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-model-item label=\"涉及业务\">\n              <j-multi-select-tag type=\"list_multi\" v-model=\"queryParam.businessTypeList\" :trigger-change=\"true\"\n                                  placeholder=\"请选择涉及业务\" dictCode=\"km_dict_business\"></j-multi-select-tag>\n            </a-form-model-item>\n          </a-col>\n\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"关键字\">\n              <a-input placeholder=\"请输入关键字\" v-model=\"queryParam.keywords\"></a-input>\n            </a-form-item>\n          </a-col>\n\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"文号\">\n              <a-input placeholder=\"请输入文号\" v-model=\"queryParam.fileNo\" @change=\"transitionQueryFileNo\"></a-input>\n            </a-form-item>\n          </a-col>\n\n\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"文件类型\">\n              <a-input placeholder=\"请输入文件类型\" v-model=\"queryParam.fileType\"></a-input>\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"10\" :lg=\"12\" :md=\"14\" :sm=\"48\">\n            <a-form-item label=\"发文时间\">\n              <j-dict-select-tag type=\"list\" placeholder=\"请选择开始时间\" v-model=\"queryParam.pubTimeStart\" style=\"width:40%\"\n                                 dictCode=\"km_dict_year\"></j-dict-select-tag>\n              <span class=\"query-group-split-cust\"></span>\n              <j-dict-select-tag type=\"list\" placeholder=\"请选择结束时间\" v-model=\"queryParam.pubTimeEnd\" style=\"width: 40%\"\n                                 dictCode=\"km_dict_year\"></j-dict-select-tag>\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"10\" :lg=\"12\" :md=\"14\" :sm=\"48\">\n            <a-form-item label=\"上传时间\">\n              <j-date :show-time=\"true\" date-format=\"YYYY-MM-DD HH:mm:ss\" placeholder=\"请选择开始时间\"\n                      class=\"query-group-cust\" v-model=\"queryParam.createTimeStart\"></j-date>\n              <span class=\"query-group-split-cust\"></span>\n              <j-date :show-time=\"true\" date-format=\"YYYY-MM-DD HH:mm:ss\" placeholder=\"请选择结束时间\"\n                      class=\"query-group-cust\" v-model=\"queryParam.createTimeEnd\"></j-date>\n            </a-form-item>\n          </a-col>\n\n        </template>\n        <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\n            <a-button @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\n            <a @click=\"handleToggleSearch\" style=\"margin-left: 8px\">\n              {{ toggleSearchStatus ? '收起' : '展开' }}\n              <a-icon :type=\"toggleSearchStatus ? 'up' : 'down'\"/>\n            </a>\n          </span>\n        </a-col>\n      </a-row>\n    </a-form>\n  </div>\n  <!-- 查询区域-END -->\n\n  <!-- 操作按钮区域 -->\n  <div class=\"table-operator\">\n    <a-button type=\"primary\" icon=\"upload\" @click=\"uploadModules\">上传</a-button>\n    <!--      <a-button type=\"primary\" icon=\"download\" @click=\"handleExportXls('草稿文件夹')\">导出</a-button>-->\n    <a-dropdown v-if=\"selectedRowKeys.length > 0\">\n      <a-menu slot=\"overlay\">\n        <a-menu-item key=\"1\" @click=\"batchDel\">\n          <a-icon type=\"delete\"/>\n          批量删除\n        </a-menu-item>\n        <!--<a-menu-item key=\"2\" @click=\"batchEdit\">-->\n          <!--<a-icon type=\"audit\"/>-->\n          <!--批量提审-->\n        <!--</a-menu-item>-->\n        <a-menu-item key=\"3\" @click=\"downloadKmDocBatch\">\n          <a-icon type=\"vertical-align-bottom\"/>\n          批量下载\n        </a-menu-item>\n      </a-menu>\n      <a-button style=\"margin-left: 8px\"> 批量操作\n        <a-icon type=\"down\"/>\n      </a-button>\n    </a-dropdown>\n  </div>\n\n  <!-- table区域-begin -->\n  <div>\n    <div v-if=\"selectedRowKeys.length > 0\" class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 8px;\">\n      <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">{{\n      selectedRowKeys.length }}</a>项\n      <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\n    </div>\n\n    <a-table\n      ref=\"table\"\n      size=\"middle\"\n      :scroll=\"{x:true}\"\n      bordered\n      rowKey=\"id\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      :loading=\"loading\"\n      :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\n      @change=\"handleTableChange\">\n\n      // 添加自定义列表插槽\n      <div slot=\"filterDropdown\">\n        <a-card style=\"width: 350px\">\n          <a-checkbox-group @change=\"onColSettingsChange\" v-model=\"settingColumns\" :defaultValue=\"settingColumns\">\n            <a-row>\n              <template v-for=\"(item,index) in defColumns\">\n                <template v-if=\"item.key!='rowIndex'&& item.dataIndex!='action'\">\n                  <a-col :span=\"12\">\n                    <a-checkbox :value=\"item.dataIndex\">{{ item.title }}</a-checkbox>\n                  </a-col>\n                </template>\n              </template>\n            </a-row>\n          </a-checkbox-group>\n        </a-card>\n      </div>\n      <a-icon slot=\"filterIcon\" type='setting' title=\"自定义列\"\n              :style=\"{ fontSize:'16px',color:  '#108ee9',minWidth:'50px'}\"/>\n\n\n      <template slot=\"htmlSlot\" slot-scope=\"text\">\n        <div v-html=\"text\"></div>\n      </template>\n      <template slot=\"imgSlot\" slot-scope=\"text\">\n        <span v-if=\"!text\" style=\"font-size: 12px;font-style: italic;\">无图片</span>\n        <img v-else :src=\"getImgView(text)\" height=\"25px\" alt=\"\"\n             style=\"max-width:80px;font-size: 12px;font-style: italic;\"/>\n      </template>\n      <template slot=\"fileSlot\" slot-scope=\"text\">\n        <span v-if=\"!text\" style=\"font-size: 12px;font-style: italic;\">无文件</span>\n        <a-button\n          v-else\n          :ghost=\"true\"\n          type=\"primary\"\n          icon=\"download\"\n          size=\"small\"\n          @click=\"downloadFile(text)\">\n          下载\n        </a-button>\n      </template>\n\n      <span slot=\"action\" slot-scope=\"text, record\">\n        <a-icon type=\"edit\" title=\"编辑\" @click=\"previewKmDoc(record,false)\"\n                :style=\"{ fontSize: '18px', color: '#1890FF', }\"/>\n\n        <!--<a-popconfirm-->\n          <!--title=\"你是否将文件提交审核?\"-->\n          <!--ok-text=\"确定\"-->\n          <!--cancel-text=\"取消\"-->\n\n          <!--@confirm=\"confirm(record)\">-->\n          <!--<a-icon type=\"audit\" title=\"提审\" href=\"#\" :style=\"{ fontSize: '18px', color: '#1890FF', }\"-->\n                  <!--style=\"margin-left: 5px\"/>-->\n        <!--</a-popconfirm>-->\n\n        <a-popconfirm title=\"确定删除吗?\" @confirm=\"() => handleDelete(record.id)\">\n        <a-icon type=\"delete\" title=\"删除\" :style=\"{ fontSize: '18px', color: '#1890FF', }\" style=\"margin-left: 5px\"/>\n        </a-popconfirm>\n\n        <a-icon type=\"download\" title=\"下载\" @click=\"downloadKmDoc(record)\"\n                :style=\"{ fontSize: '18px', color: '#1890FF'}\" style=\"margin-left: 5px\"/>\n      </span>\n\n      <span slot=\"docTitle\" slot-scope=\"text,record\">\n        <span v-if=\"record.convertFlag === -1\" :title=record.processMsg><a style=\"color: #d71345\">{{record.title}}</a></span>\n        <span v-else-if=\"record.convertFlag === 0\" title=\"等待转换\"><a style=\"color: #fa8c16\">{{record.title}}</a></span>\n        <span v-else @click=\"previewKmDoc(record,true)\"><a style=\"color: #303133\">{{ record.title}}</a></span>\n      </span>\n\n      <span slot=\"status\" slot-scope=\"text,record\">\n        <a v-if=\"record.status===0\" style=\"color: #000c17\">未提审</a>\n        <a v-if=\"record.status===3\" style=\"color: #d71345\">已拒绝</a>\n      </span>\n\n    </a-table>\n  </div>\n  <upload-modal ref=\"uploadModules\" @ok=\"modalFormOk\"></upload-modal>\n\n  <a-j-modal :title=\"title\"\n             :width=\"width\"\n             :visible=\"visible\"\n             @cancel=\"handleCancel\"\n             @changeShowTitle=\"changeShowTitle\"\n             :show-return=\"showTitlePDF\"\n             cancelText=\"关闭\"\n             :okButtonProps=\"{ class:{'jee-hidden': true} }\">\n    <a-spin :spinning=\"confirmLoading\" style=\"margin-top: 10px;float: left;width: 690px\">\n      <j-form-container v-if=\"!formDisabled&&boolCheckTitle&&!showTitlePDF\">\n        <a-form-model ref=\"form\" :model=\"model\" :rules=\"validatorRules\" slot=\"detail\">\n          <a-row>\n            <a-col :span=\"21\">\n              <a-form-model-item label=\"标题\" style=\"margin-left: -15px\" :labelCol=\"labelCol3\" :wrapperCol=\"wrapperCol3\"\n                                 prop=\"title\">\n                <a-textarea v-model=\"model.title\" placeholder=\"请输入标题\"\n                            :auto-size=\"{ minRows: 1, maxRows: 3 }\"></a-textarea>\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"3\" style=\"text-align: center;margin-top: 4px\">\n              <a-button type=\"primary\" @click=\"checkTitleFun\">查重</a-button>\n            </a-col>\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"分类\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"category\">\n                <j-dict-select-tag type=\"list\" placeholder=\"请选择分类\" v-model=\"model.category\"\n                                   dictCode=\"km_dict_category\"></j-dict-select-tag>\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"文号\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"fileNo\">\n                <a-input v-model=\"model.fileNo\" placeholder=\"输入文号\" @change=\"transitionFileNo\"></a-input>\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"来源\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"source\">\n                <j-dict-select-tag type=\"list\" placeholder=\"请选择来源\" v-model=\"model.source\"\n                                   dictCode=\"km_dict_source\"></j-dict-select-tag>\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"发文时间\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"pubTimeTxt\">\n                <a-input v-model=\"model.pubTimeTxt\" placeholder=\"输入格式: 2021-01-01\"></a-input>\n              </a-form-model-item>\n            </a-col>\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"关键字\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"keywords\">\n                <a-textarea v-model=\"model.keywords\" placeholder=\"请输入关键字\"\n                            :auto-size=\"{ minRows: 1, maxRows: 3 }\"></a-textarea>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"12\">\n              <!--专题分类-->\n              <a-form-model-item label=\"专题分类\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n                <a-textarea @click=\"showModel(model)\" v-model=\"model.topicIds_dictText\"\n                            placeholder=\"请点击选择专题\" readOnly :auto-size=\"{ minRows: 1, maxRows: 3 }\">\n                </a-textarea>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"涉及业务\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"businessTypes\">\n                <j-multi-select-tag type=\"list_multi\" v-model=\"model.businessTypes\" :trigger-change=\"true\"\n                                    placeholder=\"请选择涉及业务\" dictCode=\"km_dict_business\"></j-multi-select-tag>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"版本状态\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"versions\">\n                <j-multi-select-tag type=\"list_multi\" v-model=\"model.versions\" :trigger-change=\"true\"\n                                    placeholder=\"请选择版本状态\" dictCode=\"km_dict_versions\"></j-multi-select-tag>\n              </a-form-model-item>\n            </a-col>\n\n\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"归属科室\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"depId\">\n                <j-select-depart v-model=\"model.depId\" :multi=\"false\"></j-select-depart>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"公开方式\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"publicRemark\">\n                <j-dict-select-tag type=\"list\" placeholder=\"请选择公开方式\" v-model=\"model.publicRemark\"\n                                   dictCode=\"km_dict_public_remark\"></j-dict-select-tag>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"24\">\n              <a-form-model-item label=\"备注\" :labelCol=\"labelCol2\" :wrapperCol=\"wrapperCol2\" prop=\"remark\">\n                <a-textarea v-model=\"model.remark\" placeholder=\"请输入备注\"\n                            :auto-size=\"{ minRows: 1, maxRows: 3 }\"></a-textarea>\n              </a-form-model-item>\n            </a-col>\n\n\n            <a-col :span=\"12\">\n              <a-form-model-item label=\"预览文件\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" prop=\"keywords\">\n                  <span>\n                      <a-popconfirm v-if=\"resetPreviewShow\"\n                                    title=\"你是否将文件恢复吗?\"\n                                    ok-text=\"确定\"\n                                    cancel-text=\"取消\"\n                                    @confirm=\"resetPreviewFile(model)\">\n                      <a href=\"#\" style=\"margin-left: 20px;color: #1890FF\">恢复</a>\n                        </a-popconfirm>\n                  <a-upload\n                    name=\"file\"\n                    :multiple=\"true\"\n                    :action=\"urlAction+model.id\"\n                    :headers=\"headers\"\n                    @change=\"handleChange\"\n                    :showUploadList=\"false\"\n                  >\n                  <a-button type=\"link\" style=\"color: #1890FF\">更改</a-button>\n                  </a-upload>\n                  </span>\n              </a-form-model-item>\n            </a-col>\n\n            <a-col :span=\"24\" style=\"text-align: center;margin-top: -10px\">\n              <a-button type=\"primary\" @click=\"arrayFun(model)\">确认修改</a-button>\n              <a-button style=\"margin-left: 40px\" @click=\"handleCancel\">取消修改</a-button>\n            </a-col>\n          </a-row>\n        </a-form-model>\n        <subject-modal ref=\"modalForm\" @ok=\"modalFormOk\"></subject-modal>\n      </j-form-container>\n      <div v-if=\"!formDisabled&&!boolCheckTitle&&!showTitlePDF\">\n        <a-form layout=\"inline\" style=\"min-height: 10px\">\n          <a-row>\n            <a-col style=\"background-color:#ededf0\">\n              <h3 style=\"color: #303133;margin-left: 10px;padding:5px\">\n                <b> </b>\n                <b style=\"margin-left: 10px\" @click=\"changeBoolCheckTitleFun\">\n                  <a style=\"color:#303133;\">\n                    <a-icon type=\"arrow-left\"/>\n                    <span>&nbsp;&nbsp;返回</span>\n                  </a>\n                </b>\n              </h3>\n            </a-col>\n            <a-col v-for=\"(item,index) in checkTitleList\" :xl=\"24\" :lg=\"24\" :md=\"24\" :sm=\"24\" :key=\"index\">\n              <p style=\"text-align: left;margin-left: 20px\">\n                <span class=\"titleIndex\"><b>{{index+1+'、'}}</b></span>\n                <span @click=\"showPreviewKmDoc(item.id,item.title)\"><a style=\"color: #303133\" v-html=\"item.title\"></a></span>\n              </p>\n            </a-col>\n          </a-row>\n        </a-form>\n      </div>\n    </a-spin>\n\n    <div style=\"float: left;width: 690px\" v-if=\"!formDisabled&&!boolCheckTitle&&showTitlePDF\" >\n      <div>\n        <div>\n          <p-d-f-modal :p-d-furl=\"TitlePDFurl\" />\n        </div>\n      </div>\n    </div>\n    <div style=\"float: right;width: 700px\" >\n      <div>\n        <div>\n          <p-d-f-modal :p-d-furl=\"PDFurl\"  />\n        </div>\n      </div>\n    </div>\n\n  </a-j-modal>\n\n  <b-j-modal :title=\"title\"\n             :width=\"width\"\n             :visible=\"visibleB\"\n             @cancel=\"handleCancel\"\n             cancelText=\"关闭\"\n             :okButtonProps=\"{ class:{'jee-hidden': true} }\">\n    <div>\n      <div>\n        <p-d-f-modal :p-d-furl=\"PDFurl\" :iframeWidth=\"width\" :pdf-loading=\"pdfLoading\" />\n      </div>\n    </div>\n  </b-j-modal>\n\n</a-card>\n",null]}