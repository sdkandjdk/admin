{"remainingRequest":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\3月\\知识库系统\\admin\\src\\views\\system\\modules\\DataLogModal.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\workspace\\3月\\知识库系统\\admin\\src\\views\\system\\modules\\DataLogModal.vue","mtime":1704718217000},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\babel.config.js","mtime":1704718217000},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1709701140363},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1709701116791}],"contextDependencies":[],"result":["import { getAction } from '@/api/manage';\nimport DataLogCompareModal from './DataLogCompareModal';\nexport default {\n  name: 'DataLogModal',\n  components: {\n    DataLogCompareModal: DataLogCompareModal\n  },\n  dataId1: '',\n  dataId2: '',\n  dataTable1: '',\n  dataID3: '',\n  data: function data() {\n    return {\n      modalWidth: 700,\n      modaltoggleFlag: true,\n      confirmDirty: false,\n      title: \"操作\",\n      visible: false,\n      model: {},\n      confirmLoading: false,\n      headers: {},\n      form: this.$form.createForm(this),\n      url: {\n        queryDataVerListUrl: \"/sys/dataLog/queryDataVerList\"\n      },\n      DataVersionList: []\n    };\n  },\n  created: function created() {},\n  methods: {\n    addModal: function addModal(records) {\n      var _this = this;\n      var dataTable = records[0].dataTable;\n      var dataId = records[0].dataId;\n      var dataVersion1 = records[0].dataVersion;\n      var dataVersion2 = records[1].dataVersion;\n      this.dataId1 = records[0].id;\n      this.dataId2 = records[1].id;\n      this.dataTable1 = records[0].dataTable;\n      this.dataID3 = records[0].dataId;\n      this.initDataVersionList();\n      this.form.resetFields();\n      this.visible = true;\n      this.$nextTick(function () {\n        _this.form.setFieldsValue({\n          dataTale: dataTable,\n          dataId: dataId,\n          dataVersion1: dataVersion1,\n          dataVersion2: dataVersion2\n        });\n      });\n    },\n    handleOk: function handleOk() {\n      this.close();\n      this.$refs.modal.compareModal(this.dataId1, this.dataId2);\n      this.$refs.modal.title = \"数据比较\";\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    handleSubmit: function handleSubmit() {},\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n      this.disableSubmit = false;\n    },\n    modalFormOk: function modalFormOk() {},\n    initDataVersionList: function initDataVersionList() {\n      var _this2 = this;\n      var that = this;\n      getAction(that.url.queryDataVerListUrl, {\n        dataTable: this.dataTable1,\n        dataId: this.dataID3\n      }).then(function (res) {\n        if (res.success) {\n          _this2.DataVersionList = res.result;\n        } else {\n          _this2.DataVersionList = [];\n          _this2.dataId1 = '', _this2.dataId2 = '', console.log(res.message);\n        }\n      });\n    },\n    handleChange1: function handleChange1(value) {\n      this.dataId1 = value;\n    },\n    handleChange2: function handleChange2(value) {\n      this.dataId2 = value;\n    },\n    handleTableBlur: function handleTableBlur(e) {\n      this.dataTable1 = e.target.value;\n      this.initDataVersionList();\n    },\n    handleIdBlur: function handleIdBlur(e) {\n      this.dataID3 = e.target.value;\n      this.initDataVersionList();\n    }\n  }\n};",{"version":3,"names":["getAction","DataLogCompareModal","name","components","dataId1","dataId2","dataTable1","dataID3","data","modalWidth","modaltoggleFlag","confirmDirty","title","visible","model","confirmLoading","headers","form","$form","createForm","url","queryDataVerListUrl","DataVersionList","created","methods","addModal","records","_this","dataTable","dataId","dataVersion1","dataVersion","dataVersion2","id","initDataVersionList","resetFields","$nextTick","setFieldsValue","dataTale","handleOk","close","$refs","modal","compareModal","handleCancel","handleSubmit","$emit","disableSubmit","modalFormOk","_this2","that","then","res","success","result","console","log","message","handleChange1","value","handleChange2","handleTableBlur","e","target","handleIdBlur"],"sources":["src/views/system/modules/DataLogModal.vue"],"sourcesContent":["<template>\n  <div>\n    <a-modal\n      :width=\"modalWidth\"\n      :visible=\"visible\"\n      title=\"数据对比窗口\"\n      :confirmLoading=\"confirmLoading\"\n      @ok=\"handleOk\"\n      @cancel=\"handleCancel\"\n      cancelText=\"取消\">\n\n      <a-spin :spinning=\"confirmLoading\">\n        <a-form @submit=\"handleSubmit\" :form=\"form\" class=\"form\">\n          <a-row class=\"form-row\" :gutter=\"24\">\n            <a-col :md=\"12\" :sm=\"8\">\n              <a-form-item label=\"数据库表名\"  :label-col=\"{ span: 6 }\" :wrapper-col=\"{ span: 15 }\">\n                <a-input placeholder=\"请输入数据库表名\" v-decorator=\"[ 'dataTale', {}]\" @blur=\"handleTableBlur\" disabled/>\n              </a-form-item>\n            </a-col>\n\n            <a-col :md=\"12\" :sm=\"8\">\n              <a-form-item label=\"数据ID\"  :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\">\n                <a-input placeholder=\"请输入数据ID\" v-decorator=\"[ 'dataId', {}]\" @blur=\"handleIdBlur\" disabled/>\n              </a-form-item>\n            </a-col>\n          </a-row>\n\n          <a-row class=\"form-row\" :gutter=\"24\">\n            <a-col :md=\"12\" :sm=\"8\">\n              <a-form-item label=\"版本号1\"  :label-col=\"{ span: 6 }\" :wrapper-col=\"{ span: 15 }\">\n                <a-select placeholder=\"请选择版本号\" v-decorator=\"[ 'dataVersion1', {}]\" @change=\"handleChange1\">\n                  <a-select-option v-for=\"(log,logindex) in DataVersionList\" :key=\"logindex.toString()\" :value=\"log.id\">\n                    {{ log.dataVersion }}\n                  </a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n            <a-col :md=\"12\" :sm=\"8\">\n              <a-form-item label=\"版本号2\"  :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 15 }\">\n                <a-select placeholder=\"请选择版本号\" v-decorator=\"[ 'dataVersion2', {}]\" @change=\"handleChange2\">\n                  <a-select-option v-for=\"(log,logindex) in DataVersionList\" :key=\"logindex.toString()\" :value=\"log.id\">\n                    {{ log.dataVersion }}\n                  </a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </a-form>\n      </a-spin>\n      <data-log-compare-modal ref=\"modal\" @ok=\"modalFormOk\" ></data-log-compare-modal>\n    </a-modal>\n  </div>\n</template>\n\n<script>\n  import { getAction } from '@/api/manage'\n  import DataLogCompareModal from './DataLogCompareModal'\n  export default {\n    name: 'DataLogModal',\n    components: { DataLogCompareModal },\n    dataId1:'',\n    dataId2: '',\n    dataTable1:'',\n    dataID3:'',\n\n    data () {\n      return {\n        modalWidth:700,\n        modaltoggleFlag:true,\n        confirmDirty: false,\n        title:\"操作\",\n        visible: false,\n        model: {},\n        confirmLoading: false,\n        headers:{},\n        form:this.$form.createForm(this),\n        url: {\n          queryDataVerListUrl:\"/sys/dataLog/queryDataVerList\",\n        },\n        DataVersionList:[],\n      }\n    },\n    created () {\n    },\n    methods: {\n      addModal(records){\n        const dataTable = records[0].dataTable\n        const dataId = records[0].dataId;\n        const dataVersion1 = records[0].dataVersion;\n        const dataVersion2 = records[1].dataVersion;\n        this.dataId1 = records[0].id;\n        this.dataId2 = records[1].id;\n        this.dataTable1 = records[0].dataTable\n        this.dataID3 =  records[0].dataId\n        this.initDataVersionList();\n        this.form.resetFields();\n        this.visible = true;\n        this.$nextTick(() => {\n          this.form.setFieldsValue({dataTale:dataTable,dataId:dataId,dataVersion1:dataVersion1,dataVersion2:dataVersion2});\n        });\n      },\n      handleOk () {\n        this.close();\n        this.$refs.modal.compareModal(this.dataId1  ,this.dataId2);\n        this.$refs.modal.title=\"数据比较\";\n      },\n      handleCancel(){\n        this.close()\n      },\n      handleSubmit(){\n      },\n      close () {\n        this.$emit('close');\n        this.visible = false;\n        this.disableSubmit = false;\n      },\n      modalFormOk () {\n      },\n      initDataVersionList(){\n        let that = this;\n        getAction(that.url.queryDataVerListUrl,{dataTable:this.dataTable1,dataId:this.dataID3}).then((res)=>{\n          if(res.success){\n            this.DataVersionList = res.result;\n          }else{\n            this.DataVersionList=[];\n            this.dataId1 = '',\n            this.dataId2='',\n            console.log(res.message);\n\n          }\n        });\n      },\n      handleChange1(value) {\n        this.dataId1 = value;\n      },\n      handleChange2(value) {\n        this.dataId2 = value;\n      },\n      handleTableBlur(e){\n        this.dataTable1 = e.target.value;\n        this.initDataVersionList();\n      },\n      handleIdBlur(e){\n        this.dataID3 = e.target.value;\n        this.initDataVersionList();\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"AAuDA,SAAAA,SAAA;AACA,OAAAC,mBAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF,mBAAA,EAAAA;EAAA;EACAG,OAAA;EACAC,OAAA;EACAC,UAAA;EACAC,OAAA;EAEAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;MACAC,eAAA;MACAC,YAAA;MACAC,KAAA;MACAC,OAAA;MACAC,KAAA;MACAC,cAAA;MACAC,OAAA;MACAC,IAAA,OAAAC,KAAA,CAAAC,UAAA;MACAC,GAAA;QACAC,mBAAA;MACA;MACAC,eAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA,GACA;EACAC,OAAA;IACAC,QAAA,WAAAA,SAAAC,OAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,SAAA,GAAAF,OAAA,IAAAE,SAAA;MACA,IAAAC,MAAA,GAAAH,OAAA,IAAAG,MAAA;MACA,IAAAC,YAAA,GAAAJ,OAAA,IAAAK,WAAA;MACA,IAAAC,YAAA,GAAAN,OAAA,IAAAK,WAAA;MACA,KAAA3B,OAAA,GAAAsB,OAAA,IAAAO,EAAA;MACA,KAAA5B,OAAA,GAAAqB,OAAA,IAAAO,EAAA;MACA,KAAA3B,UAAA,GAAAoB,OAAA,IAAAE,SAAA;MACA,KAAArB,OAAA,GAAAmB,OAAA,IAAAG,MAAA;MACA,KAAAK,mBAAA;MACA,KAAAjB,IAAA,CAAAkB,WAAA;MACA,KAAAtB,OAAA;MACA,KAAAuB,SAAA;QACAT,KAAA,CAAAV,IAAA,CAAAoB,cAAA;UAAAC,QAAA,EAAAV,SAAA;UAAAC,MAAA,EAAAA,MAAA;UAAAC,YAAA,EAAAA,YAAA;UAAAE,YAAA,EAAAA;QAAA;MACA;IACA;IACAO,QAAA,WAAAA,SAAA;MACA,KAAAC,KAAA;MACA,KAAAC,KAAA,CAAAC,KAAA,CAAAC,YAAA,MAAAvC,OAAA,OAAAC,OAAA;MACA,KAAAoC,KAAA,CAAAC,KAAA,CAAA9B,KAAA;IACA;IACAgC,YAAA,WAAAA,aAAA;MACA,KAAAJ,KAAA;IACA;IACAK,YAAA,WAAAA,aAAA,GACA;IACAL,KAAA,WAAAA,MAAA;MACA,KAAAM,KAAA;MACA,KAAAjC,OAAA;MACA,KAAAkC,aAAA;IACA;IACAC,WAAA,WAAAA,YAAA,GACA;IACAd,mBAAA,WAAAA,oBAAA;MAAA,IAAAe,MAAA;MACA,IAAAC,IAAA;MACAlD,SAAA,CAAAkD,IAAA,CAAA9B,GAAA,CAAAC,mBAAA;QAAAO,SAAA,OAAAtB,UAAA;QAAAuB,MAAA,OAAAtB;MAAA,GAAA4C,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACAJ,MAAA,CAAA3B,eAAA,GAAA8B,GAAA,CAAAE,MAAA;QACA;UACAL,MAAA,CAAA3B,eAAA;UACA2B,MAAA,CAAA7C,OAAA,OACA6C,MAAA,CAAA5C,OAAA,OACAkD,OAAA,CAAAC,GAAA,CAAAJ,GAAA,CAAAK,OAAA;QAEA;MACA;IACA;IACAC,aAAA,WAAAA,cAAAC,KAAA;MACA,KAAAvD,OAAA,GAAAuD,KAAA;IACA;IACAC,aAAA,WAAAA,cAAAD,KAAA;MACA,KAAAtD,OAAA,GAAAsD,KAAA;IACA;IACAE,eAAA,WAAAA,gBAAAC,CAAA;MACA,KAAAxD,UAAA,GAAAwD,CAAA,CAAAC,MAAA,CAAAJ,KAAA;MACA,KAAAzB,mBAAA;IACA;IACA8B,YAAA,WAAAA,aAAAF,CAAA;MACA,KAAAvD,OAAA,GAAAuD,CAAA,CAAAC,MAAA,CAAAJ,KAAA;MACA,KAAAzB,mBAAA;IACA;EACA;AACA","ignoreList":[]}]}