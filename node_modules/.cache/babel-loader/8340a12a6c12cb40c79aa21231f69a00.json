{"remainingRequest":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\views\\system\\LogList.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\views\\system\\LogList.vue","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\babel.config.js","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1709701140363},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1709701116791}],"contextDependencies":[],"result":["import { filterObj } from '@/utils/util';\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport JEllipsis from '@/components/jeecg/JEllipsis';\nexport default {\n  name: \"LogList\",\n  mixins: [JeecgListMixin],\n  components: {\n    JEllipsis: JEllipsis\n  },\n  data: function data() {\n    return {\n      description: '这是日志管理页面',\n      // 查询条件\n      queryParam: {\n        ipInfo: '',\n        createTimeRange: [],\n        logType: '1',\n        keyWord: ''\n      },\n      tabKey: \"1\",\n      // 表头\n      columns: [{\n        title: '#',\n        dataIndex: '',\n        key: 'rowIndex',\n        align: \"center\",\n        customRender: function customRender(t, r, index) {\n          return parseInt(index) + 1;\n        }\n      }, {\n        title: '日志内容',\n        align: \"left\",\n        dataIndex: 'logContent',\n        scopedSlots: {\n          customRender: 'logContent'\n        },\n        sorter: true\n      }, {\n        title: '操作人ID',\n        dataIndex: 'userid',\n        align: \"center\",\n        sorter: true\n      }, {\n        title: '操作人名称',\n        dataIndex: 'username',\n        align: \"center\",\n        sorter: true\n      }, {\n        title: 'IP',\n        dataIndex: 'ip',\n        align: \"center\",\n        sorter: true\n      }, {\n        title: '耗时(毫秒)',\n        dataIndex: 'costTime',\n        align: \"center\",\n        sorter: true\n      }, {\n        title: '日志类型',\n        dataIndex: 'logType_dictText',\n        /*customRender:function (text) {\n          if(text==1){\n            return \"登录日志\";\n          }else if(text==2){\n            return \"操作日志\";\n          }else{\n            return text;\n          }\n        },*/\n        align: \"center\"\n      }, {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        align: \"center\",\n        sorter: true\n      }],\n      operateColumn: {\n        title: '操作类型',\n        dataIndex: 'operateType_dictText',\n        align: \"center\"\n      },\n      labelCol: {\n        xs: {\n          span: 1\n        },\n        sm: {\n          span: 2\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 10\n        },\n        sm: {\n          span: 16\n        }\n      },\n      url: {\n        list: \"/sys/log/list\"\n      }\n    };\n  },\n  methods: {\n    getQueryParams: function getQueryParams() {\n      var param = Object.assign({}, this.queryParam, this.isorter);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      delete param.createTimeRange; // 时间参数不传递后台\n      if (this.superQueryParams) {\n        param['superQueryParams'] = encodeURI(this.superQueryParams);\n        param['superQueryMatchType'] = this.superQueryMatchType;\n      }\n      return filterObj(param);\n    },\n    // 重置\n    searchReset: function searchReset() {\n      var that = this;\n      var logType = that.queryParam.logType;\n      that.queryParam = {}; //清空查询区域参数\n      that.queryParam.logType = logType;\n      that.loadData(this.ipagination.current);\n    },\n    // 日志类型\n    callback: function callback(key) {\n      // 动态添加操作类型列\n      if (key == 2) {\n        this.tabKey = '2';\n        this.columns.splice(7, 0, this.operateColumn);\n      } else if (this.columns.length == 9) {\n        this.tabKey = '1';\n        this.columns.splice(7, 1);\n      }\n      var that = this;\n      that.queryParam.logType = key;\n      that.loadData();\n    },\n    onDateChange: function onDateChange(value, dateString) {\n      console.log(dateString[0], dateString[1]);\n      this.queryParam.createTime_begin = dateString[0];\n      this.queryParam.createTime_end = dateString[1];\n    },\n    onDateOk: function onDateOk(value) {\n      console.log(value);\n    }\n  }\n};",{"version":3,"names":["filterObj","JeecgListMixin","JEllipsis","name","mixins","components","data","description","queryParam","ipInfo","createTimeRange","logType","keyWord","tabKey","columns","title","dataIndex","key","align","customRender","t","r","index","parseInt","scopedSlots","sorter","operateColumn","labelCol","xs","span","sm","wrapperCol","url","list","methods","getQueryParams","param","Object","assign","isorter","field","getQueryField","pageNo","ipagination","current","pageSize","superQueryParams","encodeURI","superQueryMatchType","searchReset","that","loadData","callback","splice","length","onDateChange","value","dateString","console","log","createTime_begin","createTime_end","onDateOk"],"sources":["src/views/system/LogList.vue"],"sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <!--导航区域-->\n    <div>\n      <a-tabs defaultActiveKey=\"1\" @change=\"callback\">\n        <a-tab-pane tab=\"登录日志\" key=\"1\"></a-tab-pane>\n        <a-tab-pane tab=\"操作日志\" key=\"2\"></a-tab-pane>\n      </a-tabs>\n    </div>\n\n    <!-- 查询区域 -->\n    <div class=\"table-page-search-wrapper\">\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\n        <a-row :gutter=\"24\">\n\n          <a-col :md=\"6\" :sm=\"8\">\n            <a-form-item label=\"搜索日志\">\n              <a-input placeholder=\"请输入搜索关键词\" v-model=\"queryParam.keyWord\"></a-input>\n            </a-form-item>\n          </a-col>\n\n          <a-col :md=\"6\" :sm=\"10\">\n            <a-form-item label=\"创建时间\" :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\">\n              <a-range-picker\n                style=\"width: 210px\"\n                v-model=\"queryParam.createTimeRange\"\n                format=\"YYYY-MM-DD\"\n                :placeholder=\"['开始时间', '结束时间']\"\n                @change=\"onDateChange\"\n                @ok=\"onDateOk\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"5\" :sm=\"8\" v-if=\"tabKey === '2'\">\n            <a-form-item label=\"操作类型\" style=\"left: 10px\">\n              <j-dict-select-tag v-model=\"queryParam.operateType\" placeholder=\"请选择操作类型\" dictCode=\"operate_type\"/>\n            </a-form-item>\n          </a-col>\n\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-col :md=\"6\" :sm=\"24\" >\n                <a-button type=\"primary\"  style=\"left: 10px\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\n                <a-button  @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px;left: 10px\">重置</a-button>\n            </a-col>\n          </span>\n\n        </a-row>\n      </a-form>\n    </div>\n\n    <!-- table区域-begin -->\n    <a-table\n      ref=\"table\"\n      size=\"middle\"\n      rowKey=\"id\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\">\n\n      <div v-show=\"queryParam.logType==2\" slot=\"expandedRowRender\" slot-scope=\"record\" style=\"margin: 0\">\n        <div style=\"margin-bottom: 5px\"><a-badge status=\"success\" style=\"vertical-align: middle;\"/><span style=\"vertical-align: middle;\">请求方法:{{ record.method }}</span></div>\n        <div><a-badge status=\"processing\" style=\"vertical-align: middle;\"/><span style=\"vertical-align: middle;\">请求参数:{{ record.requestParam }}</span></div>\n      </div>\n      <!-- 字符串超长截取省略号显示-->\n      <span slot=\"logContent\" slot-scope=\"text, record\">\n          <j-ellipsis :value=\"text\" :length=\"40\"/>\n        </span>\n    </a-table>\n    <!-- table区域-end -->\n  </a-card>\n</template>\n\n<script>\n  import { filterObj } from '@/utils/util';\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\n  import JEllipsis from '@/components/jeecg/JEllipsis'\n\n  export default {\n    name: \"LogList\",\n    mixins:[JeecgListMixin],\n    components: {\n      JEllipsis\n    },\n    data () {\n      return {\n        description: '这是日志管理页面',\n        // 查询条件\n        queryParam: {\n          ipInfo:'',\n          createTimeRange:[],\n          logType:'1',\n          keyWord:'',\n        },\n        tabKey: \"1\",\n        // 表头\n        columns: [\n          {\n            title: '#',\n            dataIndex: '',\n            key:'rowIndex',\n            align:\"center\",\n            customRender:function (t,r,index) {\n              return parseInt(index)+1;\n            }\n          },\n          {\n            title: '日志内容',\n            align:\"left\",\n            dataIndex: 'logContent',\n            scopedSlots: { customRender: 'logContent' },\n            sorter: true\n          },\n          {\n            title: '操作人ID',\n            dataIndex: 'userid',\n            align:\"center\",\n            sorter: true\n          },\n          {\n            title: '操作人名称',\n            dataIndex: 'username',\n            align:\"center\",\n            sorter: true\n          },\n          {\n            title: 'IP',\n            dataIndex: 'ip',\n            align:\"center\",\n            sorter: true\n          },\n          {\n            title: '耗时(毫秒)',\n            dataIndex: 'costTime',\n            align:\"center\",\n            sorter: true\n          },\n          {\n            title: '日志类型',\n            dataIndex: 'logType_dictText',\n            /*customRender:function (text) {\n              if(text==1){\n                return \"登录日志\";\n              }else if(text==2){\n                return \"操作日志\";\n              }else{\n                return text;\n              }\n            },*/\n            align:\"center\",\n          },\n          {\n            title: '创建时间',\n            dataIndex: 'createTime',\n            align:\"center\",\n            sorter: true\n          }\n        ],\n        operateColumn:\n        {\n          title: '操作类型',\n          dataIndex: 'operateType_dictText',\n          align:\"center\",\n        },\n        labelCol: {\n          xs: { span: 1 },\n          sm: { span: 2 },\n        },\n        wrapperCol: {\n          xs: { span: 10 },\n          sm: { span: 16 },\n        },\n        url: {\n          list: \"/sys/log/list\",\n        },\n      }\n    },\n    methods: {\n      getQueryParams(){\n        var param = Object.assign({}, this.queryParam,this.isorter);\n        param.field = this.getQueryField();\n        param.pageNo = this.ipagination.current;\n        param.pageSize = this.ipagination.pageSize;\n        delete param.createTimeRange; // 时间参数不传递后台\n        if (this.superQueryParams) {\n          param['superQueryParams'] = encodeURI(this.superQueryParams)\n          param['superQueryMatchType'] = this.superQueryMatchType\n        }\n        return filterObj(param);\n      },\n\n      // 重置\n      searchReset(){\n        var that = this;\n        var logType = that.queryParam.logType;\n        that.queryParam = {}; //清空查询区域参数\n        that.queryParam.logType = logType;\n        that.loadData(this.ipagination.current);\n      },\n      // 日志类型\n      callback(key){\n\n        // 动态添加操作类型列\n        if (key == 2) {\n          this.tabKey = '2';\n          this.columns.splice(7, 0, this.operateColumn);\n        }else if(this.columns.length == 9)\n        {\n          this.tabKey = '1';\n          this.columns.splice(7,1);\n        }\n\n        let that=this;\n        that.queryParam.logType=key;\n        that.loadData();\n      },\n      onDateChange: function (value, dateString) {\n        console.log(dateString[0],dateString[1]);\n        this.queryParam.createTime_begin=dateString[0];\n        this.queryParam.createTime_end=dateString[1];\n      },\n      onDateOk(value) {\n        console.log(value);\n      },\n    }\n  }\n</script>\n<style scoped>\n  @import '~@assets/less/common.less'\n</style>"],"mappings":"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","ignoreList":[]}]}