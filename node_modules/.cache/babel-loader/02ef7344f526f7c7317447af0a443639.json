{"remainingRequest":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AddressListRight.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AddressListRight.vue","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\babel.config.js","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1709701140363},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1709701116791}],"contextDependencies":[],"result":["function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport { getAction } from '@/api/manage';\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nexport default {\n  name: 'AddressListRight',\n  mixins: [JeecgListMixin],\n  components: {},\n  props: ['value'],\n  data: function data() {\n    var _this = this;\n    return {\n      description: '用户信息',\n      cardLoading: true,\n      positionInfo: {},\n      columns: [{\n        title: '#',\n        key: 'rowIndex',\n        dataIndex: '',\n        width: 60,\n        align: 'center',\n        customRender: function customRender(t, r, i) {\n          return parseInt(i) + 1;\n        }\n      }, {\n        title: '姓名',\n        width: '15%',\n        align: 'center',\n        dataIndex: 'realname'\n      }, {\n        title: '工号',\n        width: '15%',\n        align: 'center',\n        dataIndex: 'workNo'\n      }, {\n        title: '部门',\n        width: '20%',\n        align: 'center',\n        dataIndex: 'departName'\n      }, {\n        title: '职务',\n        width: '15%',\n        align: 'center',\n        dataIndex: 'post',\n        customRender: function customRender(text) {\n          return (text || '').split(',').map(function (t) {\n            return _this.positionInfo[t] ? _this.positionInfo[t] : t;\n          }).join(',');\n        }\n      }, {\n        title: '手机',\n        width: '15%',\n        align: 'center',\n        dataIndex: 'telephone'\n      },\n      // {\n      //   title: '手机号',\n      //   width: '12%',\n      //   align: 'center',\n      //   dataIndex: 'phone'\n      // },\n      {\n        title: '公司邮箱',\n        width: '15%',\n        align: 'center',\n        dataIndex: 'email'\n      }],\n      url: {\n        list: '/sys/user/queryByOrgCodeForAddressList',\n        listByPosition: '/sys/position/list'\n      }\n    };\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler: function handler(orgCode) {\n        this.dataSource = [];\n        this.loadData(1, orgCode);\n      }\n    }\n  },\n  created: function created() {\n    this.queryPositionInfo();\n  },\n  methods: {\n    loadData: function loadData(pageNum, orgCode) {\n      var _this2 = this;\n      this.loading = true;\n      if (pageNum === 1) {\n        this.ipagination.current = 1;\n      }\n      // update-begin- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n      if (!orgCode) {\n        getAction(this.url.list, _objectSpread({}, this.getQueryParams())).then(function (res) {\n          if (res.success) {\n            _this2.dataSource = res.result.records;\n            _this2.ipagination.total = res.result.total;\n          }\n        }).finally(function () {\n          _this2.loading = false;\n          _this2.cardLoading = false;\n        });\n        // update-end- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n      } else {\n        //加载数据 若传入参数1则加载第一页的内容\n        getAction(this.url.list, _objectSpread({\n          orgCode: orgCode\n        }, this.getQueryParams())).then(function (res) {\n          if (res.success) {\n            _this2.dataSource = res.result.records;\n            _this2.ipagination.total = res.result.total;\n          }\n        }).finally(function () {\n          _this2.loading = false;\n          _this2.cardLoading = false;\n        });\n      }\n    },\n    searchQuery: function searchQuery() {\n      this.loadData(1, this.value);\n    },\n    searchReset: function searchReset() {\n      this.queryParam = {};\n      this.loadData(1, this.value);\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = 'ascend' === sorter.order ? 'asc' : 'desc';\n      }\n      this.ipagination = pagination;\n      this.loadData(null, this.value);\n    },\n    // 查询职务信息\n    queryPositionInfo: function queryPositionInfo() {\n      var _this3 = this;\n      getAction(this.url.listByPosition, {\n        pageSize: 99999\n      }).then(function (res) {\n        if (res.success) {\n          var positionInfo = {};\n          res.result.records.forEach(function (record) {\n            positionInfo[record['code']] = record['name'];\n          });\n          _this3.positionInfo = positionInfo;\n        }\n      });\n    }\n  }\n};",{"version":3,"names":["getAction","JeecgListMixin","name","mixins","components","props","data","_this","description","cardLoading","positionInfo","columns","title","key","dataIndex","width","align","customRender","t","r","i","parseInt","text","split","map","join","url","list","listByPosition","watch","value","immediate","handler","orgCode","dataSource","loadData","created","queryPositionInfo","methods","pageNum","_this2","loading","ipagination","current","_objectSpread","getQueryParams","then","res","success","result","records","total","finally","searchQuery","searchReset","queryParam","handleTableChange","pagination","filters","sorter","Object","keys","length","isorter","column","field","order","_this3","pageSize","forEach","record"],"sources":["src/views/system/modules/AddressListRight.vue"],"sourcesContent":["<template>\n  <a-card class=\"j-address-list-right-card-box\" :loading=\"cardLoading\" :bordered=\"false\">\n    <div class=\"table-page-search-wrapper\">\n      <a-form-model layout=\"inline\" :model=\"queryParam\">\n        <a-row :gutter=\"10\">\n\n          <a-col :md=\"6\" :sm=\"12\">\n            <a-form-model-item label=\"姓名\" prop=\"realname\" style=\"margin-left:8px\">\n              <a-input placeholder=\"请输入姓名查询\" v-model=\"queryParam.realname\"></a-input>\n            </a-form-model-item>\n          </a-col>\n\n\n          <a-col :md=\"6\" :sm=\"12\">\n            <a-form-model-item label=\"工号\" prop=\"workNo\" style=\"margin-left:8px\">\n              <a-input placeholder=\"请输入工号查询\" v-model=\"queryParam.workNo\"></a-input>\n            </a-form-model-item>\n          </a-col>\n\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n            <a-col :md=\"6\" :sm=\"24\">\n             <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\" style=\"margin-left: 18px\">查询</a-button>\n              <a-button  @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\n            </a-col>\n          </span>\n        </a-row>\n      </a-form-model>\n    </div>\n\n    <a-table\n      ref=\"table\"\n      size=\"middle\"\n      bordered\n      rowKey=\"userId\"\n      :pagination=\"ipagination\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\">\n    </a-table>\n\n  </a-card>\n</template>\n\n<script>\n  import { getAction } from '@/api/manage'\n  import { JeecgListMixin } from '@/mixins/JeecgListMixin'\n\n  export default {\n    name: 'AddressListRight',\n    mixins: [JeecgListMixin],\n    components: {},\n    props: ['value'],\n    data() {\n      return {\n        description: '用户信息',\n        cardLoading: true,\n        positionInfo: {},\n        columns: [\n          {\n            title: '#',\n            key: 'rowIndex',\n            dataIndex: '',\n            width: 60,\n            align: 'center',\n            customRender: (t, r, i) => parseInt(i) + 1\n          },\n          {\n            title: '姓名',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'realname'\n          },\n          {\n            title: '工号',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'workNo'\n          },\n          {\n            title: '部门',\n            width: '20%',\n            align: 'center',\n            dataIndex: 'departName'\n          },\n          {\n            title: '职务',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'post',\n            customRender: (text) => (text || '').split(',').map(t => this.positionInfo[t] ? this.positionInfo[t] : t).join(',')\n          },\n          {\n            title: '手机',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'telephone'\n          },\n          // {\n          //   title: '手机号',\n          //   width: '12%',\n          //   align: 'center',\n          //   dataIndex: 'phone'\n          // },\n          {\n            title: '公司邮箱',\n            width: '15%',\n            align: 'center',\n            dataIndex: 'email'\n          }\n        ],\n        url: {\n          list: '/sys/user/queryByOrgCodeForAddressList',\n          listByPosition: '/sys/position/list'\n        }\n      }\n    },\n    watch: {\n      value: {\n        immediate: true,\n        handler(orgCode) {\n          this.dataSource = []\n          this.loadData(1, orgCode)\n        }\n      },\n    },\n    created() {\n      this.queryPositionInfo()\n    },\n    methods: {\n\n      loadData(pageNum, orgCode) {\n        this.loading = true\n        if (pageNum === 1) {\n            this.ipagination.current = 1\n        }\n        // update-begin- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n        if (!orgCode) {\n            getAction(this.url.list, {\n                ...this.getQueryParams()\n            }).then((res) => {\n                if (res.success) {\n                    this.dataSource = res.result.records\n                    this.ipagination.total = res.result.total\n                }\n            }).finally(() => {\n                this.loading = false\n                this.cardLoading = false\n            })\n          // update-end- --- author:wangshuai ------ date:20200102 ---- for:传过来的部门编码为空全查\n        }else{\n        //加载数据 若传入参数1则加载第一页的内容\n        getAction(this.url.list, {\n          orgCode,\n          ...this.getQueryParams()\n        }).then((res) => {\n          if (res.success) {\n            this.dataSource = res.result.records\n            this.ipagination.total = res.result.total\n          }\n        }).finally(() => {\n          this.loading = false\n          this.cardLoading = false\n        })\n        }\n      },\n\n      searchQuery() {\n        this.loadData(1, this.value)\n      },\n      searchReset() {\n        this.queryParam = {}\n        this.loadData(1, this.value)\n      },\n\n      handleTableChange(pagination, filters, sorter) {\n        if (Object.keys(sorter).length > 0) {\n          this.isorter.column = sorter.field\n          this.isorter.order = 'ascend' === sorter.order ? 'asc' : 'desc'\n        }\n        this.ipagination = pagination\n        this.loadData(null, this.value)\n      },\n\n      // 查询职务信息\n      queryPositionInfo() {\n        getAction(this.url.listByPosition, { pageSize: 99999 }).then(res => {\n          if (res.success) {\n            let positionInfo = {}\n            res.result.records.forEach(record => {\n              positionInfo[record['code']] = record['name']\n            })\n            this.positionInfo = positionInfo\n          }\n        })\n      }\n\n    }\n  }\n</script>\n<style>\n  .j-address-list-right-card-box .ant-table-placeholder {\n    min-height: 46px;\n  }\n</style>\n<style scoped>\n  .j-address-list-right-card-box {\n    height: 100%;\n    min-height: 300px;\n  }\n</style>"],"mappings":"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","ignoreList":[]}]}