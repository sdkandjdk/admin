{"remainingRequest":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\work-25\\知识库系统\\admin\\src\\views\\system\\modules\\DepartModal.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\work-25\\知识库系统\\admin\\src\\views\\system\\modules\\DepartModal.vue","mtime":1740909123629},{"path":"E:\\work-25\\知识库系统\\admin\\babel.config.js","mtime":1704718216000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { httpAction } from '@/api/manage';\nimport { queryIdTree } from '@/api/api';\nimport pick from 'lodash.pick';\nimport ATextarea from 'ant-design-vue/es/input/TextArea';\nexport default {\n  name: \"SysDepartModal\",\n  components: {\n    ATextarea: ATextarea\n  },\n  data: function data() {\n    return {\n      departTree: [],\n      orgTypeData: [],\n      phoneWarning: '',\n      departName: \"\",\n      title: \"操作\",\n      seen: false,\n      visible: false,\n      condition: true,\n      disableSubmit: false,\n      model: {},\n      defaultModel: {\n        departOrder: 0,\n        orgCategory: '1'\n      },\n      menuhidden: false,\n      menuusing: true,\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      validatorRules: {\n        departName: [{\n          required: true,\n          message: '请输入科室名称!'\n        }],\n        orgCode: [{\n          required: true,\n          message: '请输入科室编码!'\n        }],\n        mobile: [{\n          validator: this.validateMobile\n        }],\n        orgCategory: [{\n          required: true,\n          message: '请输入科室类型!'\n        }]\n      },\n      url: {\n        add: \"/sys/sysDepart/add\"\n      },\n      dictDisabled: true\n    };\n  },\n  created: function created() {},\n  methods: {\n    loadTreeData: function loadTreeData() {\n      var that = this;\n      queryIdTree().then(function (res) {\n        if (res.success) {\n          that.departTree = [];\n          for (var i = 0; i < res.result.length; i++) {\n            var temp = res.result[i];\n            that.departTree.push(temp);\n          }\n        }\n      });\n    },\n    add: function add(depart) {\n      if (depart) {\n        this.seen = false;\n        this.dictDisabled = false;\n      } else {\n        this.seen = true;\n        this.dictDisabled = true;\n      }\n      this.edit(depart);\n    },\n    edit: function edit(record) {\n      this.visible = true;\n      this.model = Object.assign({}, this.defaultModel, record);\n      this.loadTreeData();\n      this.model.parentId = record != null ? record.toString() : null;\n      if (this.seen) {\n        this.model.orgCategory = '1';\n      } else {\n        this.model.orgCategory = '2';\n      }\n    },\n    close: function close() {\n      this.$emit('close');\n      this.disableSubmit = false;\n      this.visible = false;\n      this.$refs.form.resetFields();\n    },\n    handleOk: function handleOk() {\n      var _this = this;\n      var that = this;\n      // 触发表单验证\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          that.confirmLoading = true;\n          httpAction(_this.url.add, _this.model, \"post\").then(function (res) {\n            if (res.success) {\n              that.$message.success(res.message);\n              that.loadTreeData();\n              that.$emit('ok');\n            } else {\n              that.$message.warning(res.message);\n            }\n          }).finally(function () {\n            that.confirmLoading = false;\n            that.close();\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    validateMobile: function validateMobile(rule, value, callback) {\n      if (!value || new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\\d{8}$/).test(value)) {\n        callback();\n      } else {\n        callback(\"您的手机号码格式不正确!\");\n      }\n    }\n  }\n};",{"version":3,"names":["httpAction","queryIdTree","pick","ATextarea","name","components","data","departTree","orgTypeData","phoneWarning","departName","title","seen","visible","condition","disableSubmit","model","defaultModel","departOrder","orgCategory","menuhidden","menuusing","labelCol","xs","span","sm","wrapperCol","confirmLoading","validatorRules","required","message","orgCode","mobile","validator","validateMobile","url","add","dictDisabled","created","methods","loadTreeData","that","then","res","success","i","result","length","temp","push","depart","edit","record","Object","assign","parentId","toString","close","$emit","$refs","form","resetFields","handleOk","_this","validate","valid","$message","warning","finally","handleCancel","rule","value","callback","RegExp","test"],"sources":["src/views/system/modules/DepartModal.vue"],"sourcesContent":["<template>\n  <a-modal\n    :title=\"title\"\n    :width=\"800\"\n    :ok=false\n    :visible=\"visible\"\n    :confirmLoading=\"confirmLoading\"\n    :okButtonProps=\"{ props: {disabled: disableSubmit} }\"\n    @ok=\"handleOk\"\n    @cancel=\"handleCancel\"\n    cancelText=\"关闭\">\n\n    <a-spin :spinning=\"confirmLoading\">\n      <a-form-model ref=\"form\" :model=\"model\" :rules=\"validatorRules\">\n        <a-form-model-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"科室名称\"\n          prop=\"departName\"\n          :hidden=\"false\"\n          hasFeedback >\n          <a-input id=\"departName\" placeholder=\"请输入科室/部门名称\" v-model=\"model.departName\"/>\n        </a-form-model-item>\n        <a-form-model-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" :hidden=\"seen\" label=\"上级部门\" hasFeedback>\n        <a-tree-select\n          style=\"width:100%\"\n          :dropdownStyle=\"{maxHeight:'200px',overflow:'auto'}\"\n          :treeData=\"departTree\"\n          v-model=\"model.parentId\"\n          placeholder=\"请选择上级部门\"\n          :disabled=\"condition\">\n        </a-tree-select>\n        </a-form-model-item>\n        <!--<a-form-model-item-->\n          <!--:labelCol=\"labelCol\"-->\n          <!--:wrapperCol=\"wrapperCol\"-->\n          <!--label=\"科室类型\">-->\n         <!--<template v-if=\"seen\">-->\n            <!--<a-radio-group v-model=\"model.orgCategory\" placeholder=\"请选择科室类型\">-->\n              <!--<a-radio value=\"1\">-->\n                <!--公司-->\n              <!--</a-radio>-->\n            <!--</a-radio-group>-->\n          <!--</template>-->\n          <!--<template v-else>-->\n            <!--<a-radio-group v-model=\"model.orgCategory\" placeholder=\"请选择科室类型\">-->\n              <!--<a-radio value=\"2\">-->\n                <!--部门-->\n              <!--</a-radio>-->\n              <!--<a-radio value=\"3\">-->\n                <!--岗位-->\n              <!--</a-radio>-->\n            <!--</a-radio-group>-->\n       <!--</template>-->\n        <!--</a-form-model-item>-->\n<!--        <a-form-model-item-->\n<!--          :labelCol=\"labelCol\"-->\n<!--          :wrapperCol=\"wrapperCol\"-->\n<!--          prop=\"mobile\"-->\n<!--          label=\"电话\">-->\n<!--          <a-input placeholder=\"请输入电话\" v-model=\"model.mobile\"/>-->\n<!--        </a-form-model-item>-->\n<!--        <a-form-model-item-->\n<!--          :labelCol=\"labelCol\"-->\n<!--          :wrapperCol=\"wrapperCol\"-->\n<!--          label=\"传真\">-->\n<!--          <a-input placeholder=\"请输入传真\" v-model=\"model.fax\"/>-->\n<!--        </a-form-model-item>-->\n<!--        <a-form-model-item-->\n<!--          :labelCol=\"labelCol\"-->\n<!--          :wrapperCol=\"wrapperCol\"-->\n<!--          label=\"地址\">-->\n<!--          <a-input placeholder=\"请输入地址\" v-model=\"model.address\"/>-->\n<!--        </a-form-model-item>-->\n        <a-form-model-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"排序\">\n          <a-input-number v-model=\"model.departOrder\"/>\n        </a-form-model-item>\n        <a-form-model-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"备注\">\n          <a-textarea placeholder=\"请输入备注\" v-model=\"model.memo\"/>\n        </a-form-model-item>\n\n      </a-form-model>\n    </a-spin>\n  </a-modal>\n</template>\n\n<script>\n  import { httpAction } from '@/api/manage'\n  import { queryIdTree } from '@/api/api'\n  import pick from 'lodash.pick'\n  import ATextarea from 'ant-design-vue/es/input/TextArea'\n  export default {\n    name: \"SysDepartModal\",\n    components: { ATextarea },\n    data () {\n      return {\n        departTree:[],\n        orgTypeData:[],\n        phoneWarning:'',\n        departName:\"\",\n        title:\"操作\",\n        seen:false,\n        visible: false,\n        condition:true,\n        disableSubmit:false,\n        model: {},\n        defaultModel:{\n          departOrder:0,\n          orgCategory:'1'\n        },\n        menuhidden:false,\n        menuusing:true,\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n\n        confirmLoading: false,\n        validatorRules:{\n          departName:[{ required: true, message: '请输入科室名称!' }],\n          orgCode:[{ required: true, message: '请输入科室编码!' }],\n          mobile: [{validator:this.validateMobile}],\n          orgCategory:[{required: true, message: '请输入科室类型!'}]\n        },\n        url: {\n          add: \"/sys/sysDepart/add\",\n        },\n        dictDisabled:true,\n      }\n    },\n    created () {\n    },\n    methods: {\n      loadTreeData(){\n        var that = this;\n        queryIdTree().then((res)=>{\n          if(res.success){\n            that.departTree = [];\n            for (let i = 0; i < res.result.length; i++) {\n              let temp = res.result[i];\n              that.departTree.push(temp);\n            }\n          }\n\n        })\n      },\n      add (depart) {\n        if(depart){\n          this.seen = false;\n          this.dictDisabled = false;\n        }else{\n          this.seen = true;\n          this.dictDisabled = true;\n        }\n        this.edit(depart);\n      },\n      edit (record) {\n          this.visible = true;\n          this.model = Object.assign({}, this.defaultModel, record)\n          this.loadTreeData();\n          this.model.parentId = record!=null?record.toString():null;\n           if(this.seen){\n             this.model.orgCategory = '1';\n           }else{\n             this.model.orgCategory = '2';\n           }\n      },\n      close () {\n        this.$emit('close');\n        this.disableSubmit = false;\n        this.visible = false;\n        this.$refs.form.resetFields();\n      },\n      handleOk () {\n        const that = this;\n        // 触发表单验证\n        this.$refs.form.validate(valid => {\n          if (valid) {\n            that.confirmLoading = true;\n            httpAction(this.url.add,this.model,\"post\").then((res)=>{\n              if(res.success){\n                that.$message.success(res.message);\n                that.loadTreeData();\n                that.$emit('ok');\n              }else{\n                that.$message.warning(res.message);\n              }\n            }).finally(() => {\n              that.confirmLoading = false;\n              that.close();\n            })\n\n          }else{\n            return false;\n          }\n        })\n      },\n      handleCancel () {\n        this.close()\n      },\n      validateMobile(rule,value,callback){\n        if (!value || new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\\d{8}$/).test(value)){\n          callback();\n        }else{\n          callback(\"您的手机号码格式不正确!\");\n        }\n\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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","ignoreList":[]}]}