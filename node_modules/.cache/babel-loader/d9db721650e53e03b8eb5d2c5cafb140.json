{"remainingRequest":"D:\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\知识库系统\\admin\\src\\views\\system\\modules\\SelectUserListModal.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\知识库系统\\admin\\src\\views\\system\\modules\\SelectUserListModal.vue","mtime":1704718216000},{"path":"D:\\知识库系统\\admin\\babel.config.js","mtime":1704718216000},{"path":"D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { filterObj } from '@/utils/util';\nimport { getUserList } from '@/api/api';\nexport default {\n  name: \"SelectUserListModal\",\n  components: {},\n  data: function data() {\n    return {\n      title: \"选择用户\",\n      queryParam: {},\n      columns: [{\n        title: '用户账号',\n        align: \"center\",\n        dataIndex: 'username',\n        fixed: 'left',\n        width: 200\n      }, {\n        title: '用户名称',\n        align: \"center\",\n        dataIndex: 'realname'\n      }, {\n        title: '性别',\n        align: \"center\",\n        dataIndex: 'sex',\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"男\";\n          } else if (text == 2) {\n            return \"女\";\n          } else {\n            return text;\n          }\n        }\n      }, {\n        title: '手机号码',\n        align: \"center\",\n        dataIndex: 'phone'\n      }, {\n        title: '邮箱',\n        align: \"center\",\n        dataIndex: 'email'\n      }, {\n        title: '状态',\n        align: \"center\",\n        dataIndex: 'status',\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"正常\";\n          } else if (text == 2) {\n            return \"冻结\";\n          } else {\n            return text;\n          }\n        }\n      }],\n      dataSource: [],\n      ipagination: {\n        current: 1,\n        pageSize: 5,\n        pageSizeOptions: ['5', '10', '20'],\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      isorter: {\n        column: 'createTime',\n        order: 'desc'\n      },\n      selectedRowKeys: [],\n      selectionRows: [],\n      visible: false,\n      toggleSearchStatus: false\n    };\n  },\n  created: function created() {\n    this.loadData();\n  },\n  methods: {\n    add: function add(selectUser, userIds) {\n      this.visible = true;\n      this.edit(selectUser, userIds);\n    },\n    edit: function edit(selectUser, userIds) {\n      //控制台报错\n      if (userIds && userIds.length > 0) {\n        this.selectedRowKeys = userIds.split(',');\n      } else {\n        this.selectedRowKeys = [];\n      }\n      if (!selectUser) {\n        this.selectionRows = [];\n      } else {\n        var that = this;\n        that.selectionRows = [];\n        selectUser.forEach(function (record, index) {\n          console.log(record);\n          that.selectionRows.push({\n            id: that.selectedRowKeys[index],\n            realname: record.label\n          });\n        });\n        // this.selectionRows = selectUser;\n      }\n    },\n    loadData: function loadData(arg) {\n      var _this = this;\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n      var params = this.getQueryParams(); //查询条件\n      getUserList(params).then(function (res) {\n        if (res.success) {\n          _this.dataSource = res.result.records;\n          _this.ipagination.total = res.result.total;\n        }\n      });\n    },\n    getQueryParams: function getQueryParams() {\n      var param = Object.assign({}, this.queryParam, this.isorter);\n      param.field = this.getQueryField();\n      //--update-begin----author:scott---date:20190818------for:新建公告时指定特定用户翻页错误SelectUserListModal #379----\n      // param.current = this.ipagination.current;\n      // param.pageSize = this.ipagination.pageSize;\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      //--update-end----author:scott---date:20190818------for:新建公告时指定特定用户翻页错误SelectUserListModal #379---\n      return filterObj(param);\n    },\n    getQueryField: function getQueryField() {\n      var str = \"id,\";\n      for (var a = 0; a < this.columns.length; a++) {\n        str += \",\" + this.columns[a].dataIndex;\n      }\n      return str;\n    },\n    //--update-begin----author:kangxiaolin---date:20190921------for:系统发送通知 用户多选失败 #513----\n    onSelectChange: function onSelectChange(selectedRowKeys) {\n      this.selectedRowKeys = selectedRowKeys;\n    },\n    onSelect: function onSelect(record, selected) {\n      if (selected == true) {\n        this.selectionRows.push(record);\n      } else {\n        this.selectionRows.forEach(function (item, index, arr) {\n          if (item.id == record.id) {\n            arr.splice(index, 1);\n          }\n        });\n      }\n      //--update-end----author:kangxiaolin---date:20190921------for:系统发送通知 用户多选失败 #513----\n    },\n    searchReset: function searchReset() {\n      var that = this;\n      Object.keys(that.queryParam).forEach(function (key) {\n        that.queryParam[key] = '';\n      });\n      that.loadData(1);\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n      }\n      this.ipagination = pagination;\n      this.loadData();\n    },\n    handleCancel: function handleCancel() {\n      this.selectionRows = [];\n      this.selectedRowKeys = [];\n      this.visible = false;\n    },\n    handleOk: function handleOk() {\n      this.$emit(\"choseUser\", this.selectionRows);\n      this.handleCancel();\n    },\n    searchByquery: function searchByquery() {\n      this.loadData(1);\n    },\n    handleToggleSearch: function handleToggleSearch() {\n      this.toggleSearchStatus = !this.toggleSearchStatus;\n    }\n  }\n};",{"version":3,"names":["filterObj","getUserList","name","components","data","title","queryParam","columns","align","dataIndex","fixed","width","customRender","text","dataSource","ipagination","current","pageSize","pageSizeOptions","showTotal","total","range","showQuickJumper","showSizeChanger","isorter","column","order","selectedRowKeys","selectionRows","visible","toggleSearchStatus","created","loadData","methods","add","selectUser","userIds","edit","length","split","that","forEach","record","index","console","log","push","id","realname","label","arg","_this","params","getQueryParams","then","res","success","result","records","param","Object","assign","field","getQueryField","pageNo","str","a","onSelectChange","onSelect","selected","item","arr","splice","searchReset","keys","key","handleTableChange","pagination","filters","sorter","handleCancel","handleOk","$emit","searchByquery","handleToggleSearch"],"sources":["src/views/system/modules/SelectUserListModal.vue"],"sourcesContent":["<template>\n  <a-modal\n    :title=\"title\"\n    :width=\"1200\"\n    :visible=\"visible\"\n    @ok=\"handleOk\"\n    @cancel=\"handleCancel\"\n    cancelText=\"关闭\">\n\n    <div class=\"table-page-search-wrapper\">\n      <a-form layout=\"inline\">\n        <a-row :gutter=\"24\">\n\n          <a-col :span=\"6\">\n            <a-form-item label=\"账号\">\n              <a-input placeholder=\"请输入账号\" v-model=\"queryParam.username\"></a-input>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"6\">\n            <a-form-item label=\"性别\">\n              <a-select v-model=\"queryParam.sex\" placeholder=\"请选择性别\">\n                <a-select-option value=\"\">请选择性别查询</a-select-option>\n                <a-select-option value=\"1\">男性</a-select-option>\n                <a-select-option value=\"2\">女性</a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n\n\n          <template v-if=\"toggleSearchStatus\">\n            <a-col :span=\"6\">\n              <a-form-item label=\"邮箱\">\n                <a-input placeholder=\"请输入邮箱\" v-model=\"queryParam.email\"></a-input>\n              </a-form-item>\n            </a-col>\n\n            <a-col :span=\"6\">\n              <a-form-item label=\"手机号码\">\n                <a-input placeholder=\"请输入手机号码\" v-model=\"queryParam.phone\"></a-input>\n              </a-form-item>\n            </a-col>\n\n            <a-col :span=\"6\">\n              <a-form-item label=\"状态\">\n                <a-select v-model=\"queryParam.status\" placeholder=\"请选择状态\">\n                  <a-select-option value=\"\">请选择状态</a-select-option>\n                  <a-select-option value=\"1\">正常</a-select-option>\n                  <a-select-option value=\"2\">解冻</a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </template>\n\n          <a-col :span=\"6\" >\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n              <a-button type=\"primary\" @click=\"searchByquery\" icon=\"search\">查询</a-button>\n              <a-button  @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\n              <a @click=\"handleToggleSearch\" style=\"margin-left: 8px\">\n                {{ toggleSearchStatus ? '收起' : '展开' }}\n                <a-icon :type=\"toggleSearchStatus ? 'up' : 'down'\"/>\n              </a>\n            </span>\n          </a-col>\n\n        </a-row>\n      </a-form>\n    </div>\n <!--    update-begin author:kangxiaolin   date:20190921   for:系统发送通知 用户多选失败 #513  -->\n    <a-table\n      ref=\"table\"\n      rowKey=\"id\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange,onSelect:onSelect}\"\n      @change=\"handleTableChange\"\n    >\n<!--     update-end   author:kangxiaolin  date:20190921     for:系统发送通知 用户多选失败 #513 -->\n    </a-table>\n  </a-modal>\n</template>\n\n<script>\n  import { filterObj } from '@/utils/util';\n\n  import { getUserList } from '@/api/api'\n\n  export default {\n    name: \"SelectUserListModal\",\n    components: {\n    },\n    data () {\n      return {\n        title:\"选择用户\",\n        queryParam: {},\n        columns: [{\n          title: '用户账号',\n          align:\"center\",\n          dataIndex: 'username',\n          fixed:'left',\n          width:200\n        },{\n          title: '用户名称',\n          align:\"center\",\n          dataIndex: 'realname',\n        },{\n          title: '性别',\n          align:\"center\",\n          dataIndex: 'sex',\n          customRender:function (text) {\n            if(text==1){\n              return \"男\";\n            }else if(text==2){\n              return \"女\";\n            }else{\n              return text;\n            }\n          }\n        },{\n          title: '手机号码',\n          align:\"center\",\n          dataIndex: 'phone'\n        },{\n          title: '邮箱',\n          align:\"center\",\n          dataIndex: 'email'\n        },{\n          title: '状态',\n          align:\"center\",\n          dataIndex: 'status',\n          customRender:function (text) {\n            if(text==1){\n              return \"正常\";\n            }else if(text==2){\n              return \"冻结\";\n            }else{\n              return text;\n            }\n          }\n        }],\n        dataSource:[],\n        ipagination:{\n          current: 1,\n          pageSize: 5,\n          pageSizeOptions: ['5', '10', '20'],\n          showTotal: (total, range) => {\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\n          },\n          showQuickJumper: true,\n          showSizeChanger: true,\n          total: 0\n        },\n        isorter:{\n          column: 'createTime',\n          order: 'desc',\n        },\n        selectedRowKeys: [],\n        selectionRows: [],\n        visible:false,\n        toggleSearchStatus:false,\n      }\n    },\n    created() {\n      this.loadData();\n    },\n    methods: {\n      add (selectUser,userIds) {\n        this.visible = true;\n        this.edit(selectUser,userIds);\n      },\n      edit(selectUser,userIds){\n        //控制台报错\n        if(userIds&&userIds.length>0){\n          this.selectedRowKeys = userIds.split(',');\n        }else{\n          this.selectedRowKeys = []\n        }\n        if(!selectUser){\n          this.selectionRows=[]\n        }else{\n          var that=this;\n          that.selectionRows=[];\n          selectUser.forEach(function(record,index){\n            console.log(record)\n            that.selectionRows.push({id: that.selectedRowKeys[index],realname:record.label})\n          })\n          // this.selectionRows = selectUser;\n        }\n      },\n      loadData (arg){\n        if(arg===1){\n          this.ipagination.current = 1;\n        }\n        let params = this.getQueryParams();//查询条件\n        getUserList(params).then((res)=>{\n          if(res.success){\n            this.dataSource = res.result.records;\n            this.ipagination.total = res.result.total;\n          }\n        })\n      },\n      getQueryParams(){\n        let param = Object.assign({}, this.queryParam,this.isorter);\n        param.field = this.getQueryField();\n        //--update-begin----author:scott---date:20190818------for:新建公告时指定特定用户翻页错误SelectUserListModal #379----\n        // param.current = this.ipagination.current;\n        // param.pageSize = this.ipagination.pageSize;\n        param.pageNo = this.ipagination.current;\n        param.pageSize = this.ipagination.pageSize;\n        //--update-end----author:scott---date:20190818------for:新建公告时指定特定用户翻页错误SelectUserListModal #379---\n        return filterObj(param);\n      },\n      getQueryField(){\n        let str = \"id,\";\n        for(let a = 0;a<this.columns.length;a++){\n          str+=\",\"+this.columns[a].dataIndex;\n        }\n        return str;\n      },\n      //--update-begin----author:kangxiaolin---date:20190921------for:系统发送通知 用户多选失败 #513----\n      onSelectChange (selectedRowKeys) {\n        this.selectedRowKeys = selectedRowKeys;\n      },\n      onSelect(record, selected){\n        if(selected == true ){\n          this.selectionRows.push(record);\n        }else {\n          this.selectionRows.forEach(function(item,index,arr){\n            if(item.id == record.id) {\n              arr.splice(index, 1);\n            }\n          })\n        }\n        //--update-end----author:kangxiaolin---date:20190921------for:系统发送通知 用户多选失败 #513----\n      },\n\n      searchReset(){\n        let that = this;\n        Object.keys(that.queryParam).forEach(function(key){\n          that.queryParam[key] = '';\n        });\n        that.loadData(1);\n      },\n      handleTableChange(pagination, filters, sorter){\n        //TODO 筛选\n        if (Object.keys(sorter).length>0){\n          this.isorter.column = sorter.field;\n          this.isorter.order = \"ascend\"==sorter.order?\"asc\":\"desc\"\n        }\n        this.ipagination = pagination;\n        this.loadData();\n      },\n      handleCancel () {\n        this.selectionRows = [];\n        this.selectedRowKeys = [];\n        this.visible = false;\n      },\n      handleOk () {\n        this.$emit(\"choseUser\",this.selectionRows);\n        this.handleCancel();\n      },\n      searchByquery(){\n        this.loadData(1);\n      },\n      handleToggleSearch(){\n        this.toggleSearchStatus = !this.toggleSearchStatus;\n      },\n    }\n  }\n</script>\n<style scoped>\n  .ant-card-body .table-operator{\n    margin-bottom: 18px;\n  }\n\n  .ant-table-tbody .ant-table-row td{\n    padding-top:15px;\n    padding-bottom:15px;\n  }\n  .anty-row-operator button{margin: 0 5px}\n  .ant-btn-danger{background-color: #ffffff}\n\n  .ant-modal-cust-warp{height: 100%}\n  .ant-modal-cust-warp .ant-modal-body{height:calc(100% - 110px) !important;overflow-y: auto}\n  .ant-modal-cust-warp .ant-modal-content{height:90% !important;overflow-y: hidden}\n\n  .anty-img-wrap{height:25px;position: relative;}\n  .anty-img-wrap > img{max-height:100%;}\n</style>"],"mappings":"AAoFA,SAAAA,SAAA;AAEA,SAAAC,WAAA;AAEA;EACAC,IAAA;EACAC,UAAA,GACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,KAAA;MACAC,UAAA;MACAC,OAAA;QACAF,KAAA;QACAG,KAAA;QACAC,SAAA;QACAC,KAAA;QACAC,KAAA;MACA;QACAN,KAAA;QACAG,KAAA;QACAC,SAAA;MACA;QACAJ,KAAA;QACAG,KAAA;QACAC,SAAA;QACAG,YAAA,WAAAA,aAAAC,IAAA;UACA,IAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA;YACA,OAAAA,IAAA;UACA;QACA;MACA;QACAR,KAAA;QACAG,KAAA;QACAC,SAAA;MACA;QACAJ,KAAA;QACAG,KAAA;QACAC,SAAA;MACA;QACAJ,KAAA;QACAG,KAAA;QACAC,SAAA;QACAG,YAAA,WAAAA,aAAAC,IAAA;UACA,IAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA;YACA,OAAAA,IAAA;UACA;QACA;MACA;MACAC,UAAA;MACAC,WAAA;QACAC,OAAA;QACAC,QAAA;QACAC,eAAA;QACAC,SAAA,WAAAA,UAAAC,KAAA,EAAAC,KAAA;UACA,OAAAA,KAAA,YAAAA,KAAA,aAAAD,KAAA;QACA;QACAE,eAAA;QACAC,eAAA;QACAH,KAAA;MACA;MACAI,OAAA;QACAC,MAAA;QACAC,KAAA;MACA;MACAC,eAAA;MACAC,aAAA;MACAC,OAAA;MACAC,kBAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,QAAA;EACA;EACAC,OAAA;IACAC,GAAA,WAAAA,IAAAC,UAAA,EAAAC,OAAA;MACA,KAAAP,OAAA;MACA,KAAAQ,IAAA,CAAAF,UAAA,EAAAC,OAAA;IACA;IACAC,IAAA,WAAAA,KAAAF,UAAA,EAAAC,OAAA;MACA;MACA,IAAAA,OAAA,IAAAA,OAAA,CAAAE,MAAA;QACA,KAAAX,eAAA,GAAAS,OAAA,CAAAG,KAAA;MACA;QACA,KAAAZ,eAAA;MACA;MACA,KAAAQ,UAAA;QACA,KAAAP,aAAA;MACA;QACA,IAAAY,IAAA;QACAA,IAAA,CAAAZ,aAAA;QACAO,UAAA,CAAAM,OAAA,WAAAC,MAAA,EAAAC,KAAA;UACAC,OAAA,CAAAC,GAAA,CAAAH,MAAA;UACAF,IAAA,CAAAZ,aAAA,CAAAkB,IAAA;YAAAC,EAAA,EAAAP,IAAA,CAAAb,eAAA,CAAAgB,KAAA;YAAAK,QAAA,EAAAN,MAAA,CAAAO;UAAA;QACA;QACA;MACA;IACA;IACAjB,QAAA,WAAAA,SAAAkB,GAAA;MAAA,IAAAC,KAAA;MACA,IAAAD,GAAA;QACA,KAAAnC,WAAA,CAAAC,OAAA;MACA;MACA,IAAAoC,MAAA,QAAAC,cAAA;MACApD,WAAA,CAAAmD,MAAA,EAAAE,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACAL,KAAA,CAAArC,UAAA,GAAAyC,GAAA,CAAAE,MAAA,CAAAC,OAAA;UACAP,KAAA,CAAApC,WAAA,CAAAK,KAAA,GAAAmC,GAAA,CAAAE,MAAA,CAAArC,KAAA;QACA;MACA;IACA;IACAiC,cAAA,WAAAA,eAAA;MACA,IAAAM,KAAA,GAAAC,MAAA,CAAAC,MAAA,UAAAvD,UAAA,OAAAkB,OAAA;MACAmC,KAAA,CAAAG,KAAA,QAAAC,aAAA;MACA;MACA;MACA;MACAJ,KAAA,CAAAK,MAAA,QAAAjD,WAAA,CAAAC,OAAA;MACA2C,KAAA,CAAA1C,QAAA,QAAAF,WAAA,CAAAE,QAAA;MACA;MACA,OAAAjB,SAAA,CAAA2D,KAAA;IACA;IACAI,aAAA,WAAAA,cAAA;MACA,IAAAE,GAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAA3D,OAAA,CAAA+B,MAAA,EAAA4B,CAAA;QACAD,GAAA,eAAA1D,OAAA,CAAA2D,CAAA,EAAAzD,SAAA;MACA;MACA,OAAAwD,GAAA;IACA;IACA;IACAE,cAAA,WAAAA,eAAAxC,eAAA;MACA,KAAAA,eAAA,GAAAA,eAAA;IACA;IACAyC,QAAA,WAAAA,SAAA1B,MAAA,EAAA2B,QAAA;MACA,IAAAA,QAAA;QACA,KAAAzC,aAAA,CAAAkB,IAAA,CAAAJ,MAAA;MACA;QACA,KAAAd,aAAA,CAAAa,OAAA,WAAA6B,IAAA,EAAA3B,KAAA,EAAA4B,GAAA;UACA,IAAAD,IAAA,CAAAvB,EAAA,IAAAL,MAAA,CAAAK,EAAA;YACAwB,GAAA,CAAAC,MAAA,CAAA7B,KAAA;UACA;QACA;MACA;MACA;IACA;IAEA8B,WAAA,WAAAA,YAAA;MACA,IAAAjC,IAAA;MACAoB,MAAA,CAAAc,IAAA,CAAAlC,IAAA,CAAAlC,UAAA,EAAAmC,OAAA,WAAAkC,GAAA;QACAnC,IAAA,CAAAlC,UAAA,CAAAqE,GAAA;MACA;MACAnC,IAAA,CAAAR,QAAA;IACA;IACA4C,iBAAA,WAAAA,kBAAAC,UAAA,EAAAC,OAAA,EAAAC,MAAA;MACA;MACA,IAAAnB,MAAA,CAAAc,IAAA,CAAAK,MAAA,EAAAzC,MAAA;QACA,KAAAd,OAAA,CAAAC,MAAA,GAAAsD,MAAA,CAAAjB,KAAA;QACA,KAAAtC,OAAA,CAAAE,KAAA,eAAAqD,MAAA,CAAArD,KAAA;MACA;MACA,KAAAX,WAAA,GAAA8D,UAAA;MACA,KAAA7C,QAAA;IACA;IACAgD,YAAA,WAAAA,aAAA;MACA,KAAApD,aAAA;MACA,KAAAD,eAAA;MACA,KAAAE,OAAA;IACA;IACAoD,QAAA,WAAAA,SAAA;MACA,KAAAC,KAAA,mBAAAtD,aAAA;MACA,KAAAoD,YAAA;IACA;IACAG,aAAA,WAAAA,cAAA;MACA,KAAAnD,QAAA;IACA;IACAoD,kBAAA,WAAAA,mBAAA;MACA,KAAAtD,kBAAA,SAAAA,kBAAA;IACA;EACA;AACA","ignoreList":[]}]}