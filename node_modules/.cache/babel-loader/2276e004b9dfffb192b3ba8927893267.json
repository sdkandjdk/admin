{"remainingRequest":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\components\\page\\GlobalHeader.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\src\\components\\page\\GlobalHeader.vue","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\babel.config.js","mtime":1704718217000},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\babel-loader\\lib\\index.js","mtime":1709701140363},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\km_community-main\\ant-design-vue-jeecg\\node_modules\\vue-loader\\lib\\index.js","mtime":1709701116791}],"contextDependencies":[],"result":["import UserMenu from '../tools/UserMenu';\nimport SMenu from '../menu/';\nimport Logo from '../tools/Logo';\nimport { mixin } from '@/utils/mixin.js';\nexport default {\n  name: 'GlobalHeader',\n  components: {\n    UserMenu: UserMenu,\n    SMenu: SMenu,\n    Logo: Logo\n  },\n  mixins: [mixin],\n  props: {\n    mode: {\n      type: String,\n      // sidemenu, topmenu\n      default: 'sidemenu'\n    },\n    menus: {\n      type: Array,\n      required: true\n    },\n    theme: {\n      type: String,\n      required: false,\n      default: 'dark'\n    },\n    collapsed: {\n      type: Boolean,\n      required: false,\n      default: false\n    },\n    device: {\n      type: String,\n      required: false,\n      default: 'desktop'\n    }\n  },\n  data: function data() {\n    return {\n      headerBarFixed: false,\n      //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n      topMenuStyle: {\n        headerIndexLeft: {},\n        topNavHeader: {},\n        headerIndexRight: {},\n        topSmenuStyle: {}\n      },\n      chatStatus: ''\n    };\n  },\n  watch: {\n    /** 监听设备变化 */device: function device() {\n      if (this.mode === 'topmenu') {\n        this.buildTopMenuStyle();\n      }\n    },\n    /** 监听导航栏模式变化 */mode: function mode(newVal) {\n      if (newVal === 'topmenu') {\n        this.buildTopMenuStyle();\n      }\n    }\n  },\n  //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n  mounted: function mounted() {\n    window.addEventListener('scroll', this.handleScroll);\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    if (this.mode === 'topmenu') {\n      this.buildTopMenuStyle();\n    }\n    //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n  },\n  methods: {\n    handleScroll: function handleScroll() {\n      if (this.autoHideHeader) {\n        var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\n        if (scrollTop > 100) {\n          this.headerBarFixed = true;\n        } else {\n          this.headerBarFixed = false;\n        }\n      } else {\n        this.headerBarFixed = false;\n      }\n    },\n    toggle: function toggle() {\n      this.$emit('toggle');\n    },\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    buildTopMenuStyle: function buildTopMenuStyle() {\n      if (this.mode === 'topmenu') {\n        if (this.device === 'mobile') {\n          // 手机端需要清空样式，否则显示会错乱\n          this.topMenuStyle.topNavHeader = {};\n          this.topMenuStyle.topSmenuStyle = {};\n          this.topMenuStyle.headerIndexRight = {};\n          this.topMenuStyle.headerIndexLeft = {};\n        } else {\n          var rightWidth = '250px';\n          this.topMenuStyle.topNavHeader = {\n            'min-width': '250px'\n          };\n          this.topMenuStyle.topSmenuStyle = {\n            'width': 'calc(100% - 250px)'\n          };\n          this.topMenuStyle.headerIndexRight = {\n            'min-width': rightWidth\n          };\n          this.topMenuStyle.headerIndexLeft = {\n            'width': \"calc(100% - \".concat(rightWidth, \")\")\n          };\n        }\n      }\n    },\n    //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    // update-begin-author:sunjianlei date:20210508 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n    handleUpdateMenuTitle: function handleUpdateMenuTitle(value) {\n      this.$emit('updateMenuTitle', value);\n    } // update-end-author:sunjianlei date:20210508 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n  }\n};",{"version":3,"names":["UserMenu","SMenu","Logo","mixin","name","components","mixins","props","mode","type","String","default","menus","Array","required","theme","collapsed","Boolean","device","data","headerBarFixed","topMenuStyle","headerIndexLeft","topNavHeader","headerIndexRight","topSmenuStyle","chatStatus","watch","buildTopMenuStyle","newVal","mounted","window","addEventListener","handleScroll","methods","autoHideHeader","scrollTop","pageYOffset","document","documentElement","body","toggle","$emit","rightWidth","concat","handleUpdateMenuTitle","value"],"sources":["src/components/page/GlobalHeader.vue"],"sourcesContent":["<template>\n  <!-- , width: fixedHeader ? `calc(100% - ${sidebarOpened ? 256 : 80}px)` : '100%'  -->\n  <a-layout-header\n    v-if=\"!headerBarFixed\"\n    :class=\"[fixedHeader && 'ant-header-fixedHeader', sidebarOpened ? 'ant-header-side-opened' : 'ant-header-side-closed', ]\"\n    :style=\"{ padding: '0' }\">\n\n    <div v-if=\"mode === 'sidemenu'\" class=\"header\" :class=\"theme\">\n      <a-icon\n        v-if=\"device==='mobile'\"\n        class=\"trigger\"\n        :type=\"collapsed ? 'menu-fold' : 'menu-unfold'\"\n        @click=\"toggle\"></a-icon>\n      <a-icon\n        v-else\n        class=\"trigger\"\n        :type=\"collapsed ? 'menu-unfold' : 'menu-fold'\"\n        @click=\"toggle\"/>\n\n      <span >{{this.$route.meta.title}}</span>\n\n      <user-menu class=\"header-index-right\" :theme=\"theme\" :style=\"topMenuStyle.headerIndexRight\"/>\n    </div>\n    <!-- 顶部导航栏模式 -->\n    <div v-else :class=\"['top-nav-header-index', theme]\">\n      <div class=\"header-index-wide\">\n        <div class=\"header-index-left\" :style=\"topMenuStyle.headerIndexLeft\">\n          <logo class=\"top-nav-header\" :show-title=\"device !== 'mobile'\" :style=\"topMenuStyle.topNavHeader\"/>\n          <div v-if=\"device !== 'mobile'\" :style=\"topMenuStyle.topSmenuStyle\">\n            <s-menu\n              mode=\"horizontal\"\n              :menu=\"menus\"\n              :theme=\"theme\"\n              @updateMenuTitle=\"handleUpdateMenuTitle\"\n            ></s-menu>\n          </div>\n          <a-icon\n            v-else\n            class=\"trigger\"\n            :type=\"collapsed ? 'menu-fold' : 'menu-unfold'\"\n            @click=\"toggle\"></a-icon>\n        </div>\n        <user-menu class=\"header-index-right\" :theme=\"theme\" :style=\"topMenuStyle.headerIndexRight\"/>\n      </div>\n    </div>\n\n  </a-layout-header>\n</template>\n\n<script>\n  import UserMenu from '../tools/UserMenu'\n  import SMenu from '../menu/'\n  import Logo from '../tools/Logo'\n  import { mixin } from '@/utils/mixin.js'\n\n  export default {\n    name: 'GlobalHeader',\n    components: {\n      UserMenu,\n      SMenu,\n      Logo,\n    },\n    mixins: [mixin],\n    props: {\n      mode: {\n        type: String,\n        // sidemenu, topmenu\n        default: 'sidemenu'\n      },\n      menus: {\n        type: Array,\n        required: true\n      },\n      theme: {\n        type: String,\n        required: false,\n        default: 'dark'\n      },\n      collapsed: {\n        type: Boolean,\n        required: false,\n        default: false\n      },\n      device: {\n        type: String,\n        required: false,\n        default: 'desktop'\n      }\n    },\n    data() {\n      return {\n        headerBarFixed: false,\n        //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n        topMenuStyle: {\n          headerIndexLeft: {},\n          topNavHeader: {},\n          headerIndexRight: {},\n          topSmenuStyle: {}\n        },\n        chatStatus: '',\n      }\n    },\n    watch: {\n      /** 监听设备变化 */\n      device() {\n        if (this.mode === 'topmenu') {\n          this.buildTopMenuStyle()\n        }\n      },\n      /** 监听导航栏模式变化 */\n      mode(newVal) {\n        if (newVal === 'topmenu') {\n          this.buildTopMenuStyle()\n        }\n      }\n    },\n    //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    mounted() {\n      window.addEventListener('scroll', this.handleScroll)\n      //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n      if (this.mode === 'topmenu') {\n        this.buildTopMenuStyle()\n      }\n      //update-end--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n    },\n    methods: {\n      handleScroll() {\n        if (this.autoHideHeader) {\n          let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n          if (scrollTop > 100) {\n            this.headerBarFixed = true\n          } else {\n            this.headerBarFixed = false\n          }\n        } else {\n          this.headerBarFixed = false\n        }\n      },\n      toggle() {\n        this.$emit('toggle')\n      },\n      //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n      buildTopMenuStyle() {\n        if (this.mode === 'topmenu') {\n          if (this.device === 'mobile') {\n            // 手机端需要清空样式，否则显示会错乱\n            this.topMenuStyle.topNavHeader = {}\n            this.topMenuStyle.topSmenuStyle = {}\n            this.topMenuStyle.headerIndexRight = {}\n            this.topMenuStyle.headerIndexLeft = {}\n          } else {\n            let rightWidth = '250px'\n            this.topMenuStyle.topNavHeader = { 'min-width': '250px' }\n            this.topMenuStyle.topSmenuStyle = { 'width': 'calc(100% - 250px)' }\n            this.topMenuStyle.headerIndexRight = { 'min-width': rightWidth }\n            this.topMenuStyle.headerIndexLeft = { 'width': `calc(100% - ${rightWidth})` }\n          }\n        }\n      },\n      //update-begin--author:sunjianlei---date:20190508------for: 顶部导航栏过长时显示更多按钮-----\n\n      // update-begin-author:sunjianlei date:20210508 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n      handleUpdateMenuTitle(value) {\n        this.$emit('updateMenuTitle', value)\n      },\n      // update-end-author:sunjianlei date:20210508 for: 修复动态功能测试菜单、带参数菜单标题错误、展开错误的问题\n\n    }\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  /* update_begin author:scott date:20190220 for: 缩小首页布局顶部的高度*/\n\n\n\n  @height: 64px;\n\n  .layout {\n\n    .top-nav-header-index {\n\n      .header-index-wide {\n        margin-left: 10px;\n\n        .ant-menu.ant-menu-horizontal {\n          height: @height;\n          line-height: @height;\n        }\n      }\n      .trigger {\n        line-height: 64px;\n        &:hover {\n          background: rgba(0, 0, 0, 0.05);\n        }\n      }\n    }\n\n    .header {\n      z-index: 2;\n      color: white;\n      height: @height;\n      background-color: @primary-color;\n      transition: background 300ms;\n\n      /* dark 样式 */\n      &.dark {\n        color: #000000;\n        box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);\n        background-color: white !important;\n\n      }\n    }\n\n    .header, .top-nav-header-index {\n      &.dark .trigger:hover {\n        background: rgba(0, 0, 0, 0.05);\n      }\n    }\n  }\n\n  .ant-layout-header {\n    height: @height;\n    line-height: @height;\n  }\n\n  /* update_end author:scott date:20190220 for: 缩小首页布局顶部的高度*/\n\n</style>"],"mappings":"AAkDA,OAAAA,QAAA;AACA,OAAAC,KAAA;AACA,OAAAC,IAAA;AACA,SAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAL,QAAA,EAAAA,QAAA;IACAC,KAAA,EAAAA,KAAA;IACAC,IAAA,EAAAA;EACA;EACAI,MAAA,GAAAH,KAAA;EACAI,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,KAAA;MACAC,QAAA;IACA;IACAC,KAAA;MACAN,IAAA,EAAAC,MAAA;MACAI,QAAA;MACAH,OAAA;IACA;IACAK,SAAA;MACAP,IAAA,EAAAQ,OAAA;MACAH,QAAA;MACAH,OAAA;IACA;IACAO,MAAA;MACAT,IAAA,EAAAC,MAAA;MACAI,QAAA;MACAH,OAAA;IACA;EACA;EACAQ,IAAA,WAAAA,KAAA;IACA;MACAC,cAAA;MACA;MACAC,YAAA;QACAC,eAAA;QACAC,YAAA;QACAC,gBAAA;QACAC,aAAA;MACA;MACAC,UAAA;IACA;EACA;EACAC,KAAA;IACA,aACAT,MAAA,WAAAA,OAAA;MACA,SAAAV,IAAA;QACA,KAAAoB,iBAAA;MACA;IACA;IACA,gBACApB,IAAA,WAAAA,KAAAqB,MAAA;MACA,IAAAA,MAAA;QACA,KAAAD,iBAAA;MACA;IACA;EACA;EACA;EACAE,OAAA,WAAAA,QAAA;IACAC,MAAA,CAAAC,gBAAA,gBAAAC,YAAA;IACA;IACA,SAAAzB,IAAA;MACA,KAAAoB,iBAAA;IACA;IACA;EACA;EACAM,OAAA;IACAD,YAAA,WAAAA,aAAA;MACA,SAAAE,cAAA;QACA,IAAAC,SAAA,GAAAL,MAAA,CAAAM,WAAA,IAAAC,QAAA,CAAAC,eAAA,CAAAH,SAAA,IAAAE,QAAA,CAAAE,IAAA,CAAAJ,SAAA;QACA,IAAAA,SAAA;UACA,KAAAhB,cAAA;QACA;UACA,KAAAA,cAAA;QACA;MACA;QACA,KAAAA,cAAA;MACA;IACA;IACAqB,MAAA,WAAAA,OAAA;MACA,KAAAC,KAAA;IACA;IACA;IACAd,iBAAA,WAAAA,kBAAA;MACA,SAAApB,IAAA;QACA,SAAAU,MAAA;UACA;UACA,KAAAG,YAAA,CAAAE,YAAA;UACA,KAAAF,YAAA,CAAAI,aAAA;UACA,KAAAJ,YAAA,CAAAG,gBAAA;UACA,KAAAH,YAAA,CAAAC,eAAA;QACA;UACA,IAAAqB,UAAA;UACA,KAAAtB,YAAA,CAAAE,YAAA;YAAA;UAAA;UACA,KAAAF,YAAA,CAAAI,aAAA;YAAA;UAAA;UACA,KAAAJ,YAAA,CAAAG,gBAAA;YAAA,aAAAmB;UAAA;UACA,KAAAtB,YAAA,CAAAC,eAAA;YAAA,wBAAAsB,MAAA,CAAAD,UAAA;UAAA;QACA;MACA;IACA;IACA;IAEA;IACAE,qBAAA,WAAAA,sBAAAC,KAAA;MACA,KAAAJ,KAAA,oBAAAI,KAAA;IACA,EACA;EAEA;AACA","ignoreList":[]}]}