{"remainingRequest":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\workspace\\3月\\知识库系统\\admin\\src\\views\\system\\modules\\DepartWindow.vue?vue&type=script&lang=js","dependencies":[{"path":"F:\\workspace\\3月\\知识库系统\\admin\\src\\views\\system\\modules\\DepartWindow.vue","mtime":1704718217000},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\babel.config.js","mtime":1704718217000},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1709701140363},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1709701155248},{"path":"F:\\workspace\\3月\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1709701116791}],"contextDependencies":[],"result":["import pick from 'lodash.pick';\nimport { getAction } from '@/api/manage';\nimport { queryIdTree } from '@/api/api';\nexport default {\n  name: \"DepartWindow\",\n  components: {},\n  data: function data() {\n    return {\n      checkedKeys: [],\n      // 存储选中的部门id\n      expandedKeysss: [],\n      //展开的节点\n      userId: \"\",\n      // 存储用户id\n      model: {},\n      // 存储SysUserDepartsVO表\n      userDepartModel: {\n        userId: '',\n        departIdList: []\n      },\n      // 存储用户id一对多部门信息的对象\n      departList: [],\n      // 存储部门信息\n      modalWidth: 400,\n      departTree: [],\n      title: \"操作\",\n      visible: false,\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      confirmLoading: false,\n      headers: {},\n      form: this.$form.createForm(this),\n      url: {\n        userId: \"/sys/user/generateUserId\" // 引入生成添加用户情况下的url\n      }\n    };\n  },\n  methods: {\n    add: function add(checkedDepartKeys, userId) {\n      this.checkedKeys = checkedDepartKeys;\n      this.userId = userId;\n      this.edit({});\n    },\n    edit: function edit(record) {\n      var _this = this;\n      this.departList = [];\n      this.queryDepartTree();\n      this.form.resetFields();\n      this.visible = true;\n      this.model = Object.assign({}, record);\n      var filedsVal = pick(this.model, 'id', 'userId', 'departIdList');\n      this.$nextTick(function () {\n        _this.form.setFieldsValue(filedsVal);\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n      this.departList = [];\n      this.checkedKeys = [];\n    },\n    handleSubmit: function handleSubmit() {\n      var _this2 = this;\n      var that = this;\n      // 触发表单验证\n      this.form.validateFields(function (err) {\n        if (!err) {\n          that.confirmLoading = true;\n          if (_this2.userId == null) {\n            getAction(_this2.url.userId).then(function (res) {\n              if (res.success) {\n                var formData = {\n                  userId: res.result,\n                  departIdList: _this2.departList\n                };\n                console.log(formData);\n                that.$emit('ok', formData);\n              }\n            }).finally(function () {\n              that.departList = [];\n              that.confirmLoading = false;\n              that.close();\n            });\n          } else {\n            var formData = {\n              userId: _this2.userId,\n              departIdList: _this2.departList\n            };\n            console.log(formData);\n            that.departList = [];\n            that.$emit('ok', formData);\n            that.confirmLoading = false;\n            that.close();\n          }\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    },\n    // 选择部门时作用的API\n    onCheck: function onCheck(checkedKeys, info) {\n      this.departList = [];\n      this.checkedKeys = checkedKeys.checked;\n      var checkedNodes = info.checkedNodes;\n      for (var i = 0; i < checkedNodes.length; i++) {\n        var de = checkedNodes[i].data.props;\n        var depart = {\n          key: \"\",\n          value: \"\",\n          title: \"\"\n        };\n        depart.key = de.value;\n        depart.value = de.value;\n        depart.title = de.title;\n        this.departList.push(depart);\n      }\n      console.log('onCheck', checkedKeys, info);\n    },\n    queryDepartTree: function queryDepartTree() {\n      var _this3 = this;\n      queryIdTree().then(function (res) {\n        if (res.success) {\n          _this3.departTree = res.result;\n          if (_this3.checkedKeys && _this3.checkedKeys.length > 0) {\n            var treekey = [];\n            var arr = res.result;\n            if (arr && arr.length > 0) {\n              arr.forEach(function (item) {\n                treekey.push(item.key);\n                /*     if(item.children&&item.children.length>0){\n                       item.children.forEach(item1 => {\n                         treekey.push(item1.key);\n                       })\n                     }*/\n              });\n              _this3.expandedKeysss = treekey;\n            }\n          }\n        }\n      });\n    },\n    onExpand: function onExpand(expandedKeys) {\n      this.expandedKeysss = expandedKeys;\n    },\n    modalFormOk: function modalFormOk() {}\n  }\n};",{"version":3,"names":["pick","getAction","queryIdTree","name","components","data","checkedKeys","expandedKeysss","userId","model","userDepartModel","departIdList","departList","modalWidth","departTree","title","visible","labelCol","xs","span","sm","wrapperCol","confirmLoading","headers","form","$form","createForm","url","methods","add","checkedDepartKeys","edit","record","_this","queryDepartTree","resetFields","Object","assign","filedsVal","$nextTick","setFieldsValue","close","$emit","handleSubmit","_this2","that","validateFields","err","then","res","success","formData","result","console","log","finally","handleCancel","onCheck","info","checked","checkedNodes","i","length","de","props","depart","key","value","push","_this3","treekey","arr","forEach","item","onExpand","expandedKeys","modalFormOk"],"sources":["src/views/system/modules/DepartWindow.vue"],"sourcesContent":["<template>\n  <a-modal\n    :width=\"modalWidth\"\n    :visible=\"visible\"\n    title=\"部门搜索\"\n    :confirmLoading=\"confirmLoading\"\n    @ok=\"handleSubmit\"\n    @cancel=\"handleCancel\"\n    cancelText=\"关闭\"\n    wrapClassName=\"ant-modal-cust-warp\"\n    >\n    <!--部门树-->\n    <template>\n      <a-form :form=\"form\">\n      <a-form-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" label=\"上级部门\">\n      <a-tree\n        multiple\n        treeCheckable=\"tree\"\n        checkable\n        @expand=\"onExpand\"\n        :expandedKeys=\"expandedKeysss\"\n        :checkedKeys=\"checkedKeys\"\n        allowClear=\"true\"\n        :checkStrictly=\"true\"\n        @check=\"onCheck\"\n        :dropdownStyle=\"{maxHeight:'200px',overflow:'auto'}\"\n        :treeData=\"departTree\"\n        placeholder=\"请选择上级部门\"\n        >\n      </a-tree>\n      </a-form-item>\n      </a-form>\n    </template>\n  </a-modal>\n</template>\n\n<script>\n  import pick from 'lodash.pick'\n  import { getAction } from '@/api/manage'\n  import { queryIdTree } from '@/api/api'\n  export default {\n    name: \"DepartWindow\",\n    components: {\n    },\n    data () {\n      return {\n        checkedKeys:[], // 存储选中的部门id\n        expandedKeysss:[],//展开的节点\n        userId:\"\", // 存储用户id\n        model:{}, // 存储SysUserDepartsVO表\n        userDepartModel:{userId:'',departIdList:[]}, // 存储用户id一对多部门信息的对象\n        departList:[], // 存储部门信息\n        modalWidth:400,\n        departTree:[],\n        title:\"操作\",\n        visible: false,\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n        confirmLoading: false,\n        headers:{},\n        form:this.$form.createForm(this),\n        url: {\n          userId:\"/sys/user/generateUserId\", // 引入生成添加用户情况下的url\n        },\n      }\n    },\n    methods: {\n      add (checkedDepartKeys,userId) {\n        this.checkedKeys = checkedDepartKeys;\n        this.userId = userId;\n        this.edit({});\n      },\n      edit (record) {\n        this.departList = [];\n        this.queryDepartTree();\n        this.form.resetFields();\n        this.visible = true;\n        this.model = Object.assign({}, record);\n        let filedsVal = pick(this.model,'id','userId','departIdList');\n        this.$nextTick(() => {\n          this.form.setFieldsValue(filedsVal);\n        });\n      },\n      close () {\n        this.$emit('close');\n        this.visible = false;\n        this.departList = [];\n        this.checkedKeys = [];\n      },\n      handleSubmit () {\n        const that = this;\n        // 触发表单验证\n        this.form.validateFields((err) => {\n          if (!err) {\n            that.confirmLoading = true;\n            if(this.userId == null){\n              getAction(this.url.userId).then((res)=>{\n                if(res.success){\n                  let formData = {userId:res.result,\n                  departIdList:this.departList}\n                  console.log(formData)\n                  that.$emit('ok', formData);\n                }\n              }).finally(() => {\n                that.departList = [];\n                that.confirmLoading = false;\n                that.close();\n              })\n            }else {\n              let formData = {userId:this.userId,\n                departIdList:this.departList}\n              console.log(formData)\n              that.departList = [];\n              that.$emit('ok', formData);\n              that.confirmLoading = false;\n              that.close();\n            }\n          }\n        })\n      },\n      handleCancel () {\n        this.close()\n      },\n\n      // 选择部门时作用的API\n      onCheck(checkedKeys, info){\n        this.departList = [];\n        this.checkedKeys = checkedKeys.checked;\n        let checkedNodes = info.checkedNodes;\n        for (let i = 0; i < checkedNodes.length; i++) {\n          let de = checkedNodes[i].data.props;\n          let depart = {key:\"\",value:\"\",title:\"\"};\n          depart.key = de.value;\n          depart.value = de.value;\n          depart.title = de.title;\n          this.departList.push(depart);\n        }\n        console.log('onCheck', checkedKeys, info);\n      },\n      queryDepartTree(){\n        queryIdTree().then((res)=>{\n          if(res.success){\n            this.departTree = res.result;\n            if(this.checkedKeys&&this.checkedKeys.length >0){\n              let treekey=[];\n              let arr=res.result;\n              if(arr&&arr.length>0){\n                arr.forEach(item => {\n                  treekey.push(item.key);\n             /*     if(item.children&&item.children.length>0){\n                    item.children.forEach(item1 => {\n                      treekey.push(item1.key);\n                    })\n                  }*/\n                })\n                this.expandedKeysss = treekey\n              }\n            }\n          }\n        })\n      },\n      onExpand(expandedKeys){\n        this.expandedKeysss = expandedKeys;\n      },\n      modalFormOk(){\n\n      }\n      },\n  }\n</script>\n\n<style lang=\"less\" scoped>\n  .ant-table-tbody .ant-table-row td{\n    padding-top:10px;\n    padding-bottom:10px;\n  }\n  /deep/ .ant-modal{\n    height: 700px;\n  }\n</style>"],"mappings":"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","ignoreList":[]}]}