{"remainingRequest":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\work-25\\知识库系统\\admin\\src\\views\\system\\UserAnnouncementList.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\work-25\\知识库系统\\admin\\src\\views\\system\\UserAnnouncementList.vue","mtime":1704718216000},{"path":"E:\\work-25\\知识库系统\\admin\\babel.config.js","mtime":1704718216000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { filterObj } from '@/utils/util';\nimport { getAction, putAction } from '@/api/manage';\nimport ShowAnnouncement from '@/components/tools/ShowAnnouncement';\nimport { JeecgListMixin } from '@/mixins/JeecgListMixin';\nimport DynamicNotice from '../../components/tools/DynamicNotice';\nexport default {\n  name: \"UserAnnouncementList\",\n  mixins: [JeecgListMixin],\n  components: {\n    DynamicNotice: DynamicNotice,\n    ShowAnnouncement: ShowAnnouncement\n  },\n  data: function data() {\n    return {\n      description: '系统通告表管理页面',\n      queryParam: {},\n      columns: [{\n        title: '标题',\n        align: \"center\",\n        dataIndex: 'titile'\n      }, {\n        title: '消息类型',\n        align: \"center\",\n        dataIndex: 'msgCategory',\n        customRender: function customRender(text) {\n          if (text == '1') {\n            return \"通知公告\";\n          } else if (text == \"2\") {\n            return \"系统消息\";\n          } else {\n            return text;\n          }\n        }\n      }, {\n        title: '发布人',\n        align: \"center\",\n        dataIndex: 'sender'\n      }, {\n        title: '发布时间',\n        align: \"center\",\n        dataIndex: 'sendTime'\n      }, {\n        title: '优先级',\n        align: \"center\",\n        dataIndex: 'priority',\n        customRender: function customRender(text) {\n          if (text == 'L') {\n            return \"低\";\n          } else if (text == \"M\") {\n            return \"中\";\n          } else if (text == \"H\") {\n            return \"高\";\n          } else {\n            return text;\n          }\n        }\n      }, {\n        title: '阅读状态',\n        align: \"center\",\n        dataIndex: 'readFlag',\n        customRender: function customRender(text) {\n          if (text == '0') {\n            return \"未读\";\n          } else if (text == \"1\") {\n            return \"已读\";\n          } else {\n            return text;\n          }\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'action',\n        align: \"center\",\n        scopedSlots: {\n          customRender: 'action'\n        }\n      }],\n      url: {\n        list: \"/sys/sysAnnouncementSend/getMyAnnouncementSend\",\n        editCementSend: \"sys/sysAnnouncementSend/editByAnntIdAndUserId\",\n        readAllMsg: \"sys/sysAnnouncementSend/readAll\"\n      },\n      loading: false,\n      openPath: '',\n      formData: ''\n    };\n  },\n  methods: {\n    handleDetail: function handleDetail(record) {\n      this.$refs.sysAnnouncementModal.detail(record);\n      this.$refs.sysAnnouncementModal.title = \"查看\";\n    },\n    showAnnouncement: function showAnnouncement(record) {\n      var _this = this;\n      putAction(this.url.editCementSend, {\n        anntId: record.anntId\n      }).then(function (res) {\n        if (res.success) {\n          _this.loadData();\n          _this.syncHeadNotic(record.anntId);\n        }\n      });\n      if (record.openType === 'component') {\n        this.openPath = record.openPage;\n        this.formData = {\n          id: record.busId\n        };\n        this.$refs.showDynamNotice.detail();\n      } else {\n        this.$refs.ShowAnnouncement.detail(record);\n      }\n    },\n    syncHeadNotic: function syncHeadNotic(anntId) {\n      getAction(\"sys/annountCement/syncNotic\", {\n        anntId: anntId\n      });\n    },\n    readAll: function readAll() {\n      var that = this;\n      that.$confirm({\n        title: \"确认操作\",\n        content: \"是否全部标注已读?\",\n        onOk: function onOk() {\n          putAction(that.url.readAllMsg).then(function (res) {\n            if (res.success) {\n              that.$message.success(res.message);\n              that.loadData();\n              that.syncHeadNotic();\n            }\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"names":["filterObj","getAction","putAction","ShowAnnouncement","JeecgListMixin","DynamicNotice","name","mixins","components","data","description","queryParam","columns","title","align","dataIndex","customRender","text","scopedSlots","url","list","editCementSend","readAllMsg","loading","openPath","formData","methods","handleDetail","record","$refs","sysAnnouncementModal","detail","showAnnouncement","_this","anntId","then","res","success","loadData","syncHeadNotic","openType","openPage","id","busId","showDynamNotice","readAll","that","$confirm","content","onOk","$message","message"],"sources":["src/views/system/UserAnnouncementList.vue"],"sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <!-- 查询区域 -->\n    <div class=\"table-page-search-wrapper\">\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\n        <a-row :gutter=\"24\">\n\n          <a-col :span=\"6\">\n            <a-form-item label=\"标题\">\n              <a-input placeholder=\"请输入标题\" v-model=\"queryParam.titile\"></a-input>\n            </a-form-item>\n          </a-col>\n          <a-col :span=\"6\">\n            <a-form-item label=\"发布人\">\n              <a-input placeholder=\"请输入发布人\" v-model=\"queryParam.sender\"></a-input>\n            </a-form-item>\n          </a-col>\n\n          <a-col :span=\"8\" >\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\n              <a-button  @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\n            </span>\n          </a-col>\n\n        </a-row>\n      </a-form>\n    </div>\n\n    <div class=\"table-operator\">\n      <a-button type=\"primary\" @click=\"readAll\" icon=\"book\">全部标注已读</a-button>\n    </div>\n\n    <a-table\n      ref=\"table\"\n      size=\"default\"\n      bordered\n      rowKey=\"id\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\">\n      <span slot=\"action\" slot-scope=\"text, record\">\n        <a @click=\"showAnnouncement(record)\">查看</a>\n      </span>\n    </a-table>\n    <show-announcement ref=\"ShowAnnouncement\"></show-announcement>\n    <dynamic-notice ref=\"showDynamNotice\" :path=\"openPath\" :formData=\"formData\"/>\n  </a-card>\n</template>\n\n<script>\n  import { filterObj } from '@/utils/util'\n  import { getAction,putAction } from '@/api/manage'\n  import ShowAnnouncement from '@/components/tools/ShowAnnouncement'\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\n  import DynamicNotice from '../../components/tools/DynamicNotice'\n\n  export default {\n    name: \"UserAnnouncementList\",\n    mixins: [JeecgListMixin],\n    components: {\n      DynamicNotice,\n      ShowAnnouncement\n    },\n    data () {\n      return {\n        description: '系统通告表管理页面',\n        queryParam: {},\n        columns: [{\n          title: '标题',\n          align:\"center\",\n          dataIndex: 'titile'\n        },{\n          title: '消息类型',\n          align: \"center\",\n          dataIndex: 'msgCategory',\n          customRender: function (text) {\n            if (text == '1') {\n              return \"通知公告\";\n            } else if (text == \"2\") {\n              return \"系统消息\";\n            } else {\n              return text;\n            }\n          }\n        },{\n          title: '发布人',\n          align:\"center\",\n          dataIndex: 'sender'\n        },{\n          title: '发布时间',\n          align:\"center\",\n          dataIndex: 'sendTime'\n        },{\n          title: '优先级',\n          align:\"center\",\n          dataIndex: 'priority',\n          customRender:function (text) {\n            if(text=='L'){\n              return \"低\";\n            }else if(text==\"M\"){\n              return \"中\";\n            }else if(text==\"H\"){\n              return \"高\";\n            } else {\n              return text;\n            }\n          }\n        },{\n          title: '阅读状态',\n          align:\"center\",\n          dataIndex: 'readFlag',\n          customRender:function (text) {\n            if(text=='0'){\n              return \"未读\";\n            }else if(text==\"1\"){\n              return \"已读\";\n            } else {\n              return text;\n            }\n          }\n        },{\n          title: '操作',\n          dataIndex: 'action',\n          align:\"center\",\n          scopedSlots: { customRender: 'action' },\n        }],\n\t\t    url: {\n          list: \"/sys/sysAnnouncementSend/getMyAnnouncementSend\",\n          editCementSend:\"sys/sysAnnouncementSend/editByAnntIdAndUserId\",\n          readAllMsg:\"sys/sysAnnouncementSend/readAll\",\n        },\n        loading:false,\n        openPath:'',\n        formData:''\n      }\n    },\n    methods: {\n      handleDetail: function(record){\n        this.$refs.sysAnnouncementModal.detail(record);\n        this.$refs.sysAnnouncementModal.title=\"查看\";\n      },\n      showAnnouncement(record){\n        putAction(this.url.editCementSend,{anntId:record.anntId}).then((res)=>{\n          if(res.success){\n            this.loadData();\n            this.syncHeadNotic(record.anntId)\n          }\n        });\n        if(record.openType==='component'){\n          this.openPath = record.openPage;\n          this.formData = {id:record.busId};\n          this.$refs.showDynamNotice.detail();\n        }else{\n          this.$refs.ShowAnnouncement.detail(record);\n        }\n      },\n      syncHeadNotic(anntId){\n        getAction(\"sys/annountCement/syncNotic\",{anntId:anntId})\n      },\n      readAll(){\n        var that = this;\n        that.$confirm({\n          title:\"确认操作\",\n          content:\"是否全部标注已读?\",\n          onOk: function(){\n            putAction(that.url.readAllMsg).then((res)=>{\n              if(res.success){\n                that.$message.success(res.message);\n                that.loadData();\n                that.syncHeadNotic();\n              }\n            });\n          }\n        });\n      },\n    }\n  }\n</script>\n<style scoped>\n  .ant-card-body .table-operator{\n    margin-bottom: 18px;\n  }\n  .anty-row-operator button{margin: 0 5px}\n  .ant-btn-danger{background-color: #ffffff}\n\n  .ant-modal-cust-warp{height: 100%}\n  .ant-modal-cust-warp .ant-modal-body{height:calc(100% - 110px) !important;overflow-y: auto}\n  .ant-modal-cust-warp .ant-modal-content{height:90% !important;overflow-y: hidden}\n</style>"],"mappings":"AAqDA,SAAAA,SAAA;AACA,SAAAC,SAAA,EAAAC,SAAA;AACA,OAAAC,gBAAA;AACA,SAAAC,cAAA;AACA,OAAAC,aAAA;AAEA;EACAC,IAAA;EACAC,MAAA,GAAAH,cAAA;EACAI,UAAA;IACAH,aAAA,EAAAA,aAAA;IACAF,gBAAA,EAAAA;EACA;EACAM,IAAA,WAAAA,KAAA;IACA;MACAC,WAAA;MACAC,UAAA;MACAC,OAAA;QACAC,KAAA;QACAC,KAAA;QACAC,SAAA;MACA;QACAF,KAAA;QACAC,KAAA;QACAC,SAAA;QACAC,YAAA,WAAAA,aAAAC,IAAA;UACA,IAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA;YACA,OAAAA,IAAA;UACA;QACA;MACA;QACAJ,KAAA;QACAC,KAAA;QACAC,SAAA;MACA;QACAF,KAAA;QACAC,KAAA;QACAC,SAAA;MACA;QACAF,KAAA;QACAC,KAAA;QACAC,SAAA;QACAC,YAAA,WAAAA,aAAAC,IAAA;UACA,IAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA;YACA,OAAAA,IAAA;UACA;QACA;MACA;QACAJ,KAAA;QACAC,KAAA;QACAC,SAAA;QACAC,YAAA,WAAAA,aAAAC,IAAA;UACA,IAAAA,IAAA;YACA;UACA,WAAAA,IAAA;YACA;UACA;YACA,OAAAA,IAAA;UACA;QACA;MACA;QACAJ,KAAA;QACAE,SAAA;QACAD,KAAA;QACAI,WAAA;UAAAF,YAAA;QAAA;MACA;MACAG,GAAA;QACAC,IAAA;QACAC,cAAA;QACAC,UAAA;MACA;MACAC,OAAA;MACAC,QAAA;MACAC,QAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA,WAAAA,aAAAC,MAAA;MACA,KAAAC,KAAA,CAAAC,oBAAA,CAAAC,MAAA,CAAAH,MAAA;MACA,KAAAC,KAAA,CAAAC,oBAAA,CAAAjB,KAAA;IACA;IACAmB,gBAAA,WAAAA,iBAAAJ,MAAA;MAAA,IAAAK,KAAA;MACA/B,SAAA,MAAAiB,GAAA,CAAAE,cAAA;QAAAa,MAAA,EAAAN,MAAA,CAAAM;MAAA,GAAAC,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,OAAA;UACAJ,KAAA,CAAAK,QAAA;UACAL,KAAA,CAAAM,aAAA,CAAAX,MAAA,CAAAM,MAAA;QACA;MACA;MACA,IAAAN,MAAA,CAAAY,QAAA;QACA,KAAAhB,QAAA,GAAAI,MAAA,CAAAa,QAAA;QACA,KAAAhB,QAAA;UAAAiB,EAAA,EAAAd,MAAA,CAAAe;QAAA;QACA,KAAAd,KAAA,CAAAe,eAAA,CAAAb,MAAA;MACA;QACA,KAAAF,KAAA,CAAA1B,gBAAA,CAAA4B,MAAA,CAAAH,MAAA;MACA;IACA;IACAW,aAAA,WAAAA,cAAAL,MAAA;MACAjC,SAAA;QAAAiC,MAAA,EAAAA;MAAA;IACA;IACAW,OAAA,WAAAA,QAAA;MACA,IAAAC,IAAA;MACAA,IAAA,CAAAC,QAAA;QACAlC,KAAA;QACAmC,OAAA;QACAC,IAAA,WAAAA,KAAA;UACA/C,SAAA,CAAA4C,IAAA,CAAA3B,GAAA,CAAAG,UAAA,EAAAa,IAAA,WAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,OAAA;cACAS,IAAA,CAAAI,QAAA,CAAAb,OAAA,CAAAD,GAAA,CAAAe,OAAA;cACAL,IAAA,CAAAR,QAAA;cACAQ,IAAA,CAAAP,aAAA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}