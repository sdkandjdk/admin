{"remainingRequest":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\work-25\\知识库系统\\admin\\src\\views\\system\\modules\\SysUserAgentModal.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\work-25\\知识库系统\\admin\\src\\views\\system\\modules\\SysUserAgentModal.vue","mtime":1704718216000},{"path":"E:\\work-25\\知识库系统\\admin\\babel.config.js","mtime":1704718216000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\work-25\\知识库系统\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import pick from 'lodash.pick';\nimport { httpAction, getAction } from '@/api/manage';\nimport JDate from '@/components/jeecg/JDate.vue';\nimport JSelectUserByDep from '@/components/jeecgbiz/JSelectUserByDep';\nexport default {\n  name: \"SysUserAgentModal\",\n  components: {\n    JDate: JDate,\n    JSelectUserByDep: JSelectUserByDep\n  },\n  data: function data() {\n    return {\n      title: \"操作\",\n      visible: false,\n      model: {},\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      username: \"\",\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      validatorRules: {\n        agentUserName: {\n          rules: [{\n            required: true,\n            message: '请输入代理人用户名!'\n          }]\n        },\n        startTime: {\n          rules: [{\n            required: true,\n            message: '请输入代理开始时间!'\n          }]\n        },\n        endTime: {\n          rules: [{\n            required: true,\n            message: '请输入代理结束时间!'\n          }]\n        }\n      },\n      url: {\n        add: \"/sys/sysUserAgent/add\",\n        edit: \"/sys/sysUserAgent/edit\",\n        queryByUserName: \"/sys/sysUserAgent/queryByUserName\"\n      }\n    };\n  },\n  created: function created() {},\n  methods: {\n    agentSettings: function agentSettings(username) {\n      this.username = username;\n      this.init();\n    },\n    init: function init() {\n      var _this = this;\n      var params = {\n        userName: this.username\n      }; //查询条件\n      getAction(this.url.queryByUserName, params).then(function (res) {\n        if (res.success) {\n          console.log(\"获取流程节点信息\", res);\n          _this.edit(res.result);\n        } else {\n          _this.edit({\n            userName: _this.username,\n            status: \"0\"\n          });\n        }\n      });\n    },\n    edit: function edit(record) {\n      var _this2 = this;\n      this.form.resetFields();\n      this.model = Object.assign({}, record);\n      this.visible = true;\n      this.$nextTick(function () {\n        _this2.form.setFieldsValue(pick(_this2.model, 'userName', 'agentUserName', 'status', 'startTime', 'endTime'));\n      });\n    },\n    close: function close() {\n      this.$emit('close');\n      this.visible = false;\n    },\n    handleOk: function handleOk() {\n      var _this3 = this;\n      var that = this;\n      // 触发表单验证\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          that.confirmLoading = true;\n          var httpurl = '';\n          var method = '';\n          if (!_this3.model.id) {\n            httpurl += _this3.url.add;\n            method = 'post';\n          } else {\n            httpurl += _this3.url.edit;\n            method = 'put';\n          }\n          var formData = Object.assign(_this3.model, values);\n          httpAction(httpurl, formData, method).then(function (res) {\n            if (res.success) {\n              that.$message.success(res.message);\n              //this.init();\n            } else {\n              that.$message.warning(res.message);\n            }\n          }).finally(function () {\n            that.confirmLoading = false;\n            that.close();\n          });\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.close();\n    }\n  }\n};",{"version":3,"names":["pick","httpAction","getAction","JDate","JSelectUserByDep","name","components","data","title","visible","model","labelCol","xs","span","sm","wrapperCol","username","confirmLoading","form","$form","createForm","validatorRules","agentUserName","rules","required","message","startTime","endTime","url","add","edit","queryByUserName","created","methods","agentSettings","init","_this","params","userName","then","res","success","console","log","result","status","record","_this2","resetFields","Object","assign","$nextTick","setFieldsValue","close","$emit","handleOk","_this3","that","validateFields","err","values","httpurl","method","id","formData","$message","warning","finally","handleCancel"],"sources":["src/views/system/modules/SysUserAgentModal.vue"],"sourcesContent":["<template>\n  <a-modal\n    :title=\"title\"\n    :width=\"800\"\n    :visible=\"visible\"\n    :confirmLoading=\"confirmLoading\"\n    @ok=\"handleOk\"\n    @cancel=\"handleCancel\"\n    cancelText=\"关闭\">\n\n    <a-spin :spinning=\"confirmLoading\">\n      <a-form :form=\"form\">\n\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"用户名\">\n          <a-input placeholder=\"请输入用户名\" v-decorator=\"['userName', {}]\" readOnly/>\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"代理人用户名\">\n          <j-select-user-by-dep placeholder=\"请输入代理人用户名\" v-decorator=\"['agentUserName', validatorRules.agentUserName]\" :trigger-change=\"true\"></j-select-user-by-dep>\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"代理开始时间\">\n          <j-date\n            v-decorator=\"[ 'startTime', validatorRules.startTime]\"\n            :trigger-change=\"true\"\n            :showTime=\"true\"\n            date-format=\"YYYY-MM-DD HH:mm:ss\"\n            style=\"width:100%\"\n            placeholder=\"请选择开始时间\" >\n          </j-date>\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"代理结束时间\">\n          <j-date\n            v-decorator=\"[ 'endTime', validatorRules.endTime]\"\n            :trigger-change=\"true\"\n            :showTime=\"true\"\n            date-format=\"YYYY-MM-DD HH:mm:ss\"\n            style=\"width:100%\"\n            placeholder=\"请选择结束时间\" >\n          </j-date>\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"状态\">\n          <a-radio-group class=\"fontiframe\" name=\"radioGroup\" v-decorator=\"[ 'status', {}]\">\n            <a-radio class=\"radioGroup\" value=\"1\">有效</a-radio>\n            <a-radio class=\"radioGroup\" value=\"0\">无效</a-radio>\n          </a-radio-group>\n        </a-form-item>\n\n      </a-form>\n\n    </a-spin>\n  </a-modal>\n</template>\n\n<script>\n  import pick from 'lodash.pick'\n  import { httpAction, getAction } from '@/api/manage'\n  import JDate from '@/components/jeecg/JDate.vue';\n  import JSelectUserByDep from '@/components/jeecgbiz/JSelectUserByDep'\n\n  export default {\n    name: \"SysUserAgentModal\",\n    components: {\n      JDate,\n      JSelectUserByDep\n    },\n    data () {\n      return {\n        title:\"操作\",\n        visible: false,\n        model: {},\n        labelCol: {\n          xs: { span: 24 },\n          sm: { span: 5 },\n        },\n        wrapperCol: {\n          xs: { span: 24 },\n          sm: { span: 16 },\n        },\n        username:\"\",\n        confirmLoading: false,\n        form: this.$form.createForm(this),\n        validatorRules:{\n          agentUserName:{rules: [{ required: true, message: '请输入代理人用户名!' }]},\n          startTime:{rules: [{ required: true, message: '请输入代理开始时间!' }]},\n          endTime:{rules: [{ required: true, message: '请输入代理结束时间!' }]},\n        },\n        url: {\n          add: \"/sys/sysUserAgent/add\",\n          edit: \"/sys/sysUserAgent/edit\",\n          queryByUserName:\"/sys/sysUserAgent/queryByUserName\",\n        },\n      }\n    },\n    created () {\n    },\n    methods: {\n      agentSettings(username){\n        this.username = username;\n        this.init();\n\n      },\n      init () {\n        var params = {userName:this.username};//查询条件\n        getAction(this.url.queryByUserName,params).then((res)=>{\n          if(res.success){\n            console.log(\"获取流程节点信息\",res);\n            this.edit (res.result);\n          }else{\n            this.edit({userName:this.username,status:\"0\"});\n          }\n        })\n      },\n      edit (record) {\n        this.form.resetFields();\n        this.model = Object.assign({}, record);\n        this.visible = true;\n        this.$nextTick(() => {\n          this.form.setFieldsValue(pick(this.model,'userName','agentUserName','status','startTime','endTime'))\n        });\n      },\n      close () {\n        this.$emit('close');\n        this.visible = false;\n      },\n      handleOk () {\n        const that = this;\n        // 触发表单验证\n        this.form.validateFields((err, values) => {\n          if (!err) {\n            that.confirmLoading = true;\n            let httpurl = '';\n            let method = '';\n            if(!this.model.id){\n              httpurl+=this.url.add;\n              method = 'post';\n            }else{\n              httpurl+=this.url.edit;\n               method = 'put';\n            }\n            let formData = Object.assign(this.model, values);\n            httpAction(httpurl,formData,method).then((res)=>{\n              if(res.success){\n                that.$message.success(res.message);\n                //this.init();\n              }else{\n                that.$message.warning(res.message);\n              }\n            }).finally(() => {\n              that.confirmLoading = false;\n              that.close();\n            })\n\n\n\n          }\n        })\n      },\n      handleCancel () {\n        this.close()\n      }\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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","ignoreList":[]}]}